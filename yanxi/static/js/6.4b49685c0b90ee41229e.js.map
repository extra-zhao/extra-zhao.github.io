{"version":3,"sources":["webpack:///./src/util/turn.js","webpack:///src/pages/diary/diary.vue","webpack:///./src/pages/diary/diary.vue?f20e","webpack:///./src/pages/diary/diary.vue","webpack:///./src/pages/diary/index.js"],"names":["$","has3d","hasRot","vendor","PI","Math","A90","isTouch","window","mouseEvents","down","move","up","over","out","corners","backward","forward","all","displays","directions","turnOptions","acceleration","display","duration","page","gradients","turnCorners","when","flipOptions","cornerSize","turnMethods","init","options","document","body","style","parts","exec","navigator","userAgent","webkitVersion","parseFloat","rotationAvailable","getPrefix","i","pageNum","data","this","ch","children","extend","width","height","direction","attr","css","opts","pageObjs","pages","pageWrap","pageZoom","pagePlace","pageMv","zoom","totalPages","eventHandlers","touchStart","proxy","_touchStart","touchMove","_touchMove","touchEnd","_touchEnd","start","_eventStart","has","bind","position","turn","transform","translate","length","_eventEnd","_eventPressed","_eventReleased","_flip","parent","done","addPage","element","currentPage","className","incPages","lastPage","destroying","parseInt","turnError","_movePages","call","float","addClass","indexOf","hasClass","removeClass","_addPage","_removeFromDOM","_necessPage","class","overflow","append","appendTo","prop","_pageSize","_makeFlip","remove","hasPage","center","size","left","noCenter","view","tpage","marginLeft","destroy","flipbook","trigger","each","index","eventName","unbind","fparent","shadow","removeData","is","typeof_default","newZoom","currentView","iz","newWidth","round","newHeight","autoCenter","_updateShadow","top","right","pageWidth","pageHeight","odd","single","flip","next","disabled","_setPageLoc","_makeRange","range","remainingPages","_view","floor","min","pagesInDOM","max","_removePageFromDOM","dd","flipMethods","_moveFoldingPage","f","fwrapper","_removeMv","removePage","_fitPage","from","change","that","currentDisplay","undefined","inArray","dir","toLowerCase","animating","corner","disable","resize","splice","_addMv","push","stop","ignore","animate","force","_missing","p","missing","newView","_turnPage","current","place","optsCorners","split","flipData","actualPoint","point","effect","pop","previous","shift","peel","_addMotionPage","e","actualZoom","isDefaultPrevented","charAt","target","turned","turnData","mouseAction","time","Date","getTime","outArea","x","preventDefault","stopPropagation","apply","arguments","_eventMove","calculateZ","mv","nextPage","placePage","dpage","total","r","pageZ","partZ","pageV","addView","abs","update","fixed","pos","actualView","zIndex","pageLocation","view2","divAtt","loc","version","hover","_addPageWrapper","setData","d","z","_cAllowed","_cornerActivated","y","csz","allowedCorners","_isIArea","offset","originalEvent","touches","pageX","pageY","_c","point2D","_c2","_foldingPage","_backGradient","gradient","bshadow","type","full","wrapper","fpage","ashadow","sqrt","pow","findPos","cssProperties","prepend","hide","pointer-events","flips","bottom","cursor","_fold","o","leftPos","gradientX","fpageOrigin","parentOrigin","parentCss","relX","angle","half","backgroundColor","opacity","px","gradientEndPointA","gradientEndPointB","gradientStartVal","gradientSize","gradientOpacity","shadowVal","a","df","tr","folding","ac","tan","h","substr","compute","rel","middle","alpha","atan2","gamma","distance","sin","cos","beta","side","sideX","sideY","endingPoint","far","c","mvW","mvH","cssA","cssB","aliasingFk","origin","rotate","_showFoldedPage","visible","status","animatef","to","frame","v","turning","show","shadows","bshadowLoc","hideFoldedPage","p1","p4","delta","p2","p3","np","bezier","complete","hiding","turnPage","elevation","moving","isTurning","dec","methods","args","Array","prototype","slice","overf","t","b","use3d","degrees","property","object","Object","hasOwnProperty","vendorPrefixes","len","obj","p0","colors","numColors","j","cols","background-image","join","dx","dy","angle2","diagonal","gradientDiagonal","slope","inverse","segA","context","event","Event","isPropagationStopped","message","TurnJsError","name","Error","constructor","offsetLeft","offsetTop","offsetParent","requestAnim","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","fn","properties","diff","easing","timeDiff","cssPrefix","cssTransitionEnd","el","createElement","transitions","transition","OTransition","MSTransition","MozTransition","WebkitTransition","jQuery","diary","components","created","mounted","onTurn","$nextTick","w","jquery_default","console","log","diary_diary","render","_vm","_h","$createElement","_self","staticClass","attrs","id","_l","item","key","_v","_s","_m","staticRenderFns","src","pages_diary_diary","__webpack_require__","normalizeComponent","ssrContext"],"mappings":"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","file":"static/js/6.4b49685c0b90ee41229e.js","sourcesContent":["/**\r\n * turn.js 4th release\r\n * turnjs.com\r\n * turnjs.com/license.txt\r\n *\r\n * Copyright (C) 2012 Emmanuel Garcia\r\n * All rights reserved\r\n **/\r\nimport jQuery from \"jquery\";\r\n\r\n(function($) {\r\n\r\n    'use strict';\r\n    \r\n    var has3d,\r\n      \r\n      hasRot,\r\n    \r\n      vendor = '',\r\n      \r\n      version = '4.1.0',\r\n    \r\n      PI = Math.PI,\r\n    \r\n      A90 = PI/2,\r\n    \r\n      isTouch = 'ontouchstart' in window,\r\n    \r\n      mouseEvents = (isTouch) ?\r\n        {\r\n          down: 'touchstart',\r\n          move: 'touchmove',\r\n          up: 'touchend',\r\n          over: 'touchstart',\r\n          out: 'touchend'\r\n        }\r\n        :\r\n        {\r\n          down: 'mousedown',\r\n          move: 'mousemove',\r\n          up: 'mouseup',\r\n          over: 'mouseover',\r\n          out: 'mouseout'\r\n        },\r\n    \r\n      // Contansts used for each corner\r\n      //   | tl * tr |\r\n      // l | *     * | r\r\n      //   | bl * br |\r\n    \r\n      corners = {\r\n        backward: ['bl', 'tl'],\r\n        forward: ['br', 'tr'],\r\n        all: ['tl', 'bl', 'tr', 'br', 'l', 'r']\r\n      },\r\n    \r\n      // Display values  单双页显示\r\n    \r\n      displays = ['single', 'double'],\r\n    \r\n      // Direction values  表示方向的值\r\n    \r\n      directions = ['ltr', 'rtl'],\r\n    \r\n      // Default options 默认属性\r\n    \r\n      turnOptions = {\r\n    \r\n        // Enables hardware acceleration  是否允许硬件加速\r\n    \r\n        acceleration: true,\r\n    \r\n        // Display  双页显示\r\n    \r\n        display: 'double',\r\n    \r\n        // Duration of transition in milliseconds  翻页速度\r\n    \r\n        duration: 1000,\r\n    \r\n        // First page  首页页码\r\n    \r\n        page: 1,\r\n        \r\n        // Enables gradients  是否允许渐变\r\n    \r\n        gradients: true,\r\n    \r\n        // Corners used when turning the page  卷边效果\r\n    \r\n        turnCorners: 'bl,br',\r\n    \r\n        // Events\r\n    \r\n        when: null\r\n      },\r\n    \r\n      flipOptions = {\r\n    \r\n        // Size of the active zone of each corner  卷边大小\r\n        \r\n        cornerSize: 300\r\n        \r\n      },\r\n    \r\n      // Number of pages in the DOM, minimum value: 6\r\n    \r\n      pagesInDOM = 6,\r\n      \r\n    \r\n    turnMethods = {\r\n    \r\n      // Singleton constructor\r\n      // $('#selector').turn([options]);\r\n    \r\n      init: function(options) {\r\n    \r\n        // Define constants\r\n        \r\n        has3d = 'WebKitCSSMatrix' in window || 'MozPerspective' in document.body.style;\r\n        hasRot = rotationAvailable();\r\n        vendor = getPrefix();\r\n    \r\n        var i, that = this, pageNum = 0, data = this.data(), ch = this.children();\r\n    \r\n        // Set initial configuration\r\n    \r\n        options = $.extend({\r\n          width: this.width(),\r\n          height: this.height(),\r\n          direction: this.attr('dir') || this.css('direction') || 'ltr'\r\n        }, turnOptions, options);\r\n    \r\n        data.opts = options;\r\n        data.pageObjs = {};\r\n        data.pages = {};\r\n        data.pageWrap = {};\r\n        data.pageZoom = {};\r\n        data.pagePlace = {};\r\n        data.pageMv = [];\r\n        data.zoom = 1;\r\n        data.totalPages = options.pages || 0;\r\n        data.eventHandlers = {\r\n          touchStart: $.proxy(turnMethods._touchStart, this),\r\n          touchMove: $.proxy(turnMethods._touchMove, this),\r\n          touchEnd: $.proxy(turnMethods._touchEnd, this),\r\n          start: $.proxy(turnMethods._eventStart, this)\r\n        };\r\n    \r\n    \r\n    \r\n        // Add event listeners\r\n    \r\n        if (options.when)\r\n          for (i in options.when)\r\n            if (has(i, options.when))\r\n              this.bind(i, options.when[i]);\r\n    \r\n        // Set the css\r\n    \r\n        this.css({position: 'relative', width: options.width, height: options.height});\r\n    \r\n        // Set the initial display\r\n    \r\n        this.turn('display', options.display);\r\n    \r\n        // Set the direction\r\n    \r\n        if (options.direction!=='')\r\n          this.turn('direction', options.direction);\r\n        \r\n        // Prevent blue screen problems of switching to hardware acceleration mode\r\n        // By forcing hardware acceleration for ever\r\n    \r\n        if (has3d && !isTouch && options.acceleration)\r\n          this.transform(translate(0, 0, true));\r\n    \r\n        // Add pages from the DOM\r\n    \r\n        for (i = 0; i<ch.length; i++) {\r\n          if ($(ch[i]).attr('ignore')!='1') {\r\n            this.turn('addPage', ch[i], ++pageNum);\r\n          }\r\n        }\r\n    \r\n        // Event listeners\r\n    \r\n        $(this).bind(mouseEvents.down, data.eventHandlers.touchStart).\r\n          bind('end', turnMethods._eventEnd).\r\n          bind('pressed', turnMethods._eventPressed).\r\n          bind('released', turnMethods._eventReleased).\r\n          bind('flip', turnMethods._flip);\r\n    \r\n        $(this).parent().bind('start', data.eventHandlers.start);\r\n    \r\n        $(document).bind(mouseEvents.move, data.eventHandlers.touchMove).\r\n          bind(mouseEvents.up, data.eventHandlers.touchEnd);\r\n    \r\n        // Set the initial page\r\n    \r\n        this.turn('page', options.page);\r\n    \r\n        // This flipbook is ready\r\n    \r\n        data.done = true;\r\n    \r\n        return this;\r\n      },\r\n    \r\n      // Adds a page from external data\r\n    \r\n      addPage: function(element, page) {\r\n    \r\n        var currentPage,\r\n          className,\r\n          incPages = false,\r\n          data = this.data(),\r\n          lastPage = data.totalPages+1;\r\n    \r\n        if (data.destroying)\r\n          return false;\r\n    \r\n        // Read the page number from the className of `element` - format: p[0-9]+\r\n    \r\n        if ((currentPage = /\\bp([0-9]+)\\b/.exec($(element).attr('class'))))\r\n          page = parseInt(currentPage[1], 10);\r\n    \r\n        if (page) {\r\n          \r\n          if (page==lastPage)\r\n            incPages = true;\r\n          else if (page>lastPage)\r\n            throw turnError('Page \"'+page+'\" cannot be inserted');\r\n    \r\n        } else {\r\n          \r\n          page = lastPage;\r\n          incPages = true;\r\n    \r\n        }\r\n    \r\n        if (page>=1 && page<=lastPage) {\r\n    \r\n          if (data.display=='double')\r\n            className = (page%2) ? ' odd' : ' even';\r\n          else\r\n            className = '';\r\n    \r\n          // Stop animations\r\n          if (data.done)\r\n            this.turn('stop');\r\n    \r\n          // Move pages if it's necessary\r\n          if (page in data.pageObjs)\r\n            turnMethods._movePages.call(this, page, 1);\r\n    \r\n          // Increase the number of pages\r\n          if (incPages)\r\n            data.totalPages = lastPage;\r\n    \r\n          // Add element\r\n          data.pageObjs[page] = $(element).\r\n            css({'float': 'left'}).\r\n            addClass('page p' + page + className);\r\n    \r\n          if (!hasHardPage() &&  data.pageObjs[page].hasClass('hard')) {\r\n            data.pageObjs[page].removeClass('hard');\r\n          }\r\n    \r\n          // Add page\r\n          turnMethods._addPage.call(this, page);\r\n    \r\n          // Remove pages out of range\r\n          turnMethods._removeFromDOM.call(this);\r\n        }\r\n    \r\n        return this;\r\n      },\r\n    \r\n      // Adds a page\r\n    \r\n      _addPage: function(page) {\r\n        \r\n        var data = this.data(),\r\n          element = data.pageObjs[page];\r\n    \r\n        if (element)\r\n          if (turnMethods._necessPage.call(this, page)) {\r\n    \r\n            if (!data.pageWrap[page]) {\r\n    \r\n              // Wrapper\r\n              data.pageWrap[page] = $('<div/>',\r\n                {'class': 'page-wrapper',\r\n                  page: page,\r\n                  css: {position: 'absolute',\r\n                  overflow: 'hidden'}});\r\n    \r\n              // Append to this flipbook\r\n              this.append(data.pageWrap[page]);\r\n    \r\n              if (!data.pagePlace[page]) {\r\n                \r\n                data.pagePlace[page] = page;\r\n                // Move `pageObjs[page]` to wrapper\r\n                data.pageObjs[page].appendTo(data.pageWrap[page]);\r\n              \r\n             }\r\n    \r\n              // Set the size of the page\r\n              var prop = turnMethods._pageSize.call(this, page, true);\r\n              element.css({width: prop.width, height: prop.height});\r\n              data.pageWrap[page].css(prop);\r\n    \r\n            }\r\n    \r\n            if (data.pagePlace[page] == page) {\r\n    \r\n             // If the page isn't in another place, create the flip effect\r\n              turnMethods._makeFlip.call(this, page);\r\n    \r\n          }\r\n            \r\n          } else {\r\n    \r\n            // Place\r\n            data.pagePlace[page] = 0;\r\n    \r\n            // Remove element from the DOM\r\n            if (data.pageObjs[page])\r\n              data.pageObjs[page].remove();\r\n    \r\n          }\r\n    \r\n      },\r\n    \r\n      // Checks if a page is in memory\r\n      \r\n      hasPage: function(page) {\r\n    \r\n        return has(page, this.data().pageObjs);\r\n      \r\n      },\r\n    \r\n      // Centers the flipbook\r\n    \r\n      center: function(page) {\r\n        \r\n        var data = this.data(),\r\n          size = $(this).turn('size'),\r\n          left = 0;\r\n    \r\n        if (!data.noCenter) {\r\n          if (data.display=='double') {\r\n            var view = this.turn('view', page || data.tpage || data.page);\r\n    \r\n            if (data.direction=='ltr') {\r\n              if (!view[0])\r\n                left -= size.width/4;\r\n              else if (!view[1])\r\n                left += size.width/4;\r\n            } else {\r\n              if (!view[0])\r\n                left += size.width/4;\r\n              else if (!view[1])\r\n                left -= size.width/4;\r\n            }\r\n          \r\n          }\r\n    \r\n          $(this).css({marginLeft: left});\r\n        }\r\n    \r\n        return this;\r\n    \r\n      },\r\n    \r\n      // Destroys the flipbook\r\n    \r\n      destroy: function () {\r\n    \r\n        var page,\r\n          flipbook = this,\r\n          data = this.data(),\r\n          events = [\r\n            'end', 'first', 'flip', 'last', 'pressed',\r\n            'released', 'start', 'turning', 'turned',\r\n            'zooming', 'missing'];\r\n    \r\n        if (trigger('destroying', this)=='prevented')\r\n          return;\r\n    \r\n        data.destroying = true;\r\n    \r\n        $.each(events, function(index, eventName) {\r\n          flipbook.unbind(eventName);\r\n        });\r\n    \r\n        this.parent().unbind('start', data.eventHandlers.start);\r\n    \r\n        $(document).unbind(mouseEvents.move, data.eventHandlers.touchMove).\r\n          unbind(mouseEvents.up, data.eventHandlers.touchEnd);\r\n        \r\n        while (data.totalPages!==0) {\r\n          this.turn('removePage', data.totalPages);\r\n        }\r\n    \r\n        if (data.fparent)\r\n          data.fparent.remove();\r\n    \r\n        if (data.shadow)\r\n          data.shadow.remove();\r\n    \r\n        this.removeData();\r\n        data = null;\r\n    \r\n        return this;\r\n    \r\n      },\r\n    \r\n      // Checks if this element is a flipbook\r\n    \r\n      is: function() {\r\n    \r\n        return typeof(this.data().pages)=='object';\r\n    \r\n      },\r\n    \r\n      // Sets and gets the zoom value\r\n    \r\n      zoom: function(newZoom) {\r\n        \r\n        var data = this.data();\r\n    \r\n        if (typeof(newZoom)=='number') {\r\n    \r\n          if (newZoom<0.001 || newZoom>100)\r\n            throw turnError(newZoom+ ' is not a value for zoom');\r\n          \r\n          if (trigger('zooming', this, [newZoom, data.zoom])=='prevented')\r\n            return this;\r\n          \r\n          var size = this.turn('size'),\r\n            currentView = this.turn('view'),\r\n            iz = 1/data.zoom,\r\n            newWidth = Math.round(size.width * iz * newZoom),\r\n            newHeight = Math.round(size.height * iz * newZoom);\r\n        \r\n          data.zoom = newZoom;\r\n    \r\n          $(this).turn('stop').\r\n            turn('size', newWidth, newHeight);\r\n            /*.\r\n            css({marginTop: size.height * iz / 2 - newHeight / 2});*/\r\n    \r\n          if (data.opts.autoCenter)\r\n            this.turn('center');\r\n          /*else\r\n            $(this).css({marginLeft: size.width * iz / 2 - newWidth / 2});*/\r\n    \r\n          turnMethods._updateShadow.call(this);\r\n    \r\n          for (var i = 0; i<currentView.length; i++) {\r\n            if (currentView[i] && data.pageZoom[currentView[i]]!=data.zoom) {\r\n      \r\n              this.trigger('zoomed',[\r\n                currentView[i],\r\n                currentView,\r\n                data.pageZoom[currentView[i]],\r\n                data.zoom]);\r\n    \r\n              data.pageZoom[currentView[i]] = data.zoom;\r\n          }\r\n        }\r\n    \r\n          return this;\r\n    \r\n        } else\r\n          return data.zoom;\r\n    \r\n      },\r\n    \r\n      // Gets the size of a page\r\n    \r\n      _pageSize: function(page, position) {\r\n    \r\n        var data = this.data(),\r\n          prop = {};\r\n    \r\n        if (data.display=='single') {\r\n    \r\n          prop.width = this.width();\r\n          prop.height = this.height();\r\n    \r\n          if (position) {\r\n            prop.top = 0;\r\n            prop.left = 0;\r\n            prop.right = 'auto';\r\n          }\r\n    \r\n        } else {\r\n    \r\n          var pageWidth = this.width()/2,\r\n            pageHeight = this.height();\r\n    \r\n          if (data.pageObjs[page].hasClass('own-size')) {\r\n            prop.width = data.pageObjs[page].width();\r\n            prop.height = data.pageObjs[page].height();\r\n          } else {\r\n            prop.width = pageWidth;\r\n            prop.height = pageHeight;\r\n          }\r\n          \r\n          if (position) {\r\n            var odd = page%2;\r\n            prop.top = (pageHeight-prop.height)/2;\r\n    \r\n            if (data.direction=='ltr') {\r\n              \r\n              prop[(odd) ? 'right' : 'left'] = pageWidth-prop.width;\r\n              prop[(odd) ? 'left' : 'right'] = 'auto';\r\n    \r\n            } else {\r\n              \r\n              prop[(odd) ? 'left' : 'right'] = pageWidth-prop.width;\r\n              prop[(odd) ? 'right' : 'left'] = 'auto';\r\n    \r\n            }\r\n          \r\n          }\r\n        }\r\n    \r\n        return prop;\r\n    \r\n      },\r\n    \r\n      // Prepares the flip effect for a page\r\n    \r\n      _makeFlip: function(page) {\r\n    \r\n        var data = this.data();\r\n    \r\n        if (!data.pages[page] && data.pagePlace[page]==page) {\r\n          \r\n          var single = data.display=='single',\r\n            odd = page%2;\r\n    \r\n          data.pages[page] = data.pageObjs[page].\r\n            css(turnMethods._pageSize.call(this, page)).\r\n            flip({\r\n              page: page,\r\n              next: (odd || single) ? page+1 : page-1,\r\n              turn: this\r\n            }).\r\n            flip('disable', data.disabled);\r\n    \r\n            // Issue about z-index\r\n            turnMethods._setPageLoc.call(this, page);\r\n    \r\n            data.pageZoom[page] = data.zoom;\r\n            \r\n        }\r\n    \r\n        return data.pages[page];\r\n      },\r\n    \r\n      // Makes pages within a range\r\n    \r\n      _makeRange: function() {\r\n    \r\n        var page, range,\r\n          data = this.data();\r\n    \r\n        if (data.totalPages<1)\r\n          return;\r\n    \r\n        range = this.turn('range');\r\n    \r\n        for (page = range[0]; page<=range[1]; page++)\r\n          turnMethods._addPage.call(this, page);\r\n    \r\n      },\r\n    \r\n      // Returns a range of pages that should be in the DOM\r\n      // Example:\r\n      // - page in the current view, return true\r\n      // * page is in the range, return true\r\n      // Otherwise, return false\r\n      //\r\n      // 1 2-3 4-5 6-7 8-9 10-11 12-13\r\n      //   **  **  --   **  **\r\n    \r\n      range: function(page) {\r\n    \r\n        var remainingPages, left, right, view,\r\n          data = this.data();\r\n    \r\n          page = page || data.tpage || data.page || 1;\r\n          view = turnMethods._view.call(this, page);\r\n    \r\n          if (page<1 || page>data.totalPages)\r\n            throw turnError('\"'+page+'\" is not a valid page');\r\n    \r\n        \r\n          view[1] = view[1] || view[0];\r\n          \r\n          if (view[0]>=1 && view[1]<=data.totalPages) {\r\n    \r\n            remainingPages = Math.floor((pagesInDOM-2)/2);\r\n    \r\n            if (data.totalPages-view[1] > view[0]) {\r\n              left = Math.min(view[0]-1, remainingPages);\r\n              right = 2*remainingPages-left;\r\n            } else {\r\n              right = Math.min(data.totalPages-view[1], remainingPages);\r\n              left = 2*remainingPages-right;\r\n            }\r\n    \r\n          } else {\r\n            left = pagesInDOM-1;\r\n            right = pagesInDOM-1;\r\n          }\r\n    \r\n          return [Math.max(1, view[0]-left),\r\n              Math.min(data.totalPages, view[1]+right)];\r\n    \r\n      },\r\n    \r\n      // Detects if a page is within the range of `pagesInDOM` from the current view\r\n    \r\n      _necessPage: function(page) {\r\n        \r\n        if (page===0)\r\n          return true;\r\n    \r\n        var range = this.turn('range');\r\n    \r\n        return this.data().pageObjs[page].hasClass('fixed') ||\r\n          (page>=range[0] && page<=range[1]);\r\n        \r\n      },\r\n    \r\n      // Releases memory by removing pages from the DOM\r\n    \r\n      _removeFromDOM: function() {\r\n    \r\n        var page, data = this.data();\r\n    \r\n        for (page in data.pageWrap)\r\n          if (has(page, data.pageWrap) &&\r\n            !turnMethods._necessPage.call(this, page))\r\n          turnMethods._removePageFromDOM.call(this, page);\r\n        \r\n      },\r\n    \r\n      // Removes a page from DOM and its internal references\r\n    \r\n      _removePageFromDOM: function(page) {\r\n    \r\n        var data = this.data();\r\n    \r\n        if (data.pages[page]) {\r\n          var dd = data.pages[page].data();\r\n    \r\n          flipMethods._moveFoldingPage.call(data.pages[page], false);\r\n    \r\n          if (dd.f && dd.f.fwrapper)\r\n            dd.f.fwrapper.remove();\r\n    \r\n          data.pages[page].removeData();\r\n          data.pages[page].remove();\r\n          delete data.pages[page];\r\n        }\r\n    \r\n        if (data.pageObjs[page])\r\n          data.pageObjs[page].remove();\r\n    \r\n        if (data.pageWrap[page]) {\r\n          data.pageWrap[page].remove();\r\n          delete data.pageWrap[page];\r\n        }\r\n    \r\n        turnMethods._removeMv.call(this, page);\r\n    \r\n        delete data.pagePlace[page];\r\n        delete data.pageZoom[page];\r\n    \r\n      },\r\n    \r\n      // Removes a page\r\n    \r\n      removePage: function(page) {\r\n    \r\n        var data = this.data();\r\n    \r\n        // Delete all the pages\r\n        if (page=='*') {\r\n          \r\n          while (data.totalPages!==0) {\r\n            this.turn('removePage', data.totalPages);\r\n          }\r\n    \r\n        } else {\r\n    \r\n          if (page<1 || page>data.totalPages)\r\n            throw turnError('The page '+ page + ' doesn\\'t exist');\r\n            \r\n          if (data.pageObjs[page]) {\r\n    \r\n            // Stop animations\r\n            this.turn('stop');\r\n    \r\n            // Remove `page`\r\n            turnMethods._removePageFromDOM.call(this, page);\r\n    \r\n            delete data.pageObjs[page];\r\n    \r\n          }\r\n    \r\n          // Move the pages\r\n          turnMethods._movePages.call(this, page, -1);\r\n    \r\n          // Resize the size of this flipbook\r\n          data.totalPages = data.totalPages-1;\r\n    \r\n          // Check the current view\r\n    \r\n          if (data.page>data.totalPages) {\r\n    \r\n           data.page = null;\r\n           turnMethods._fitPage.call(this, data.totalPages);\r\n    \r\n          } else {\r\n    \r\n            turnMethods._makeRange.call(this);\r\n            this.turn('update');\r\n    \r\n          }\r\n        }\r\n    \r\n        return this;\r\n      \r\n      },\r\n    \r\n      // Moves pages\r\n    \r\n      _movePages: function(from, change) {\r\n    \r\n        var page,\r\n          that = this,\r\n          data = this.data(),\r\n          single = data.display=='single',\r\n          move = function(page) {\r\n    \r\n            var next = page + change,\r\n              odd = next%2,\r\n              className = (odd) ? ' odd ' : ' even ';\r\n    \r\n            if (data.pageObjs[page])\r\n              data.pageObjs[next] = data.pageObjs[page].\r\n                removeClass('p' + page + ' odd even').\r\n                addClass('p' + next + className);\r\n    \r\n            if (data.pagePlace[page] && data.pageWrap[page]) {\r\n    \r\n              data.pagePlace[next] = next;\r\n            \r\n              if (data.pageObjs[next].hasClass('fixed'))\r\n                data.pageWrap[next] = data.pageWrap[page].\r\n                  attr('page', next);\r\n              else\r\n                data.pageWrap[next] = data.pageWrap[page].\r\n                  css(turnMethods._pageSize.call(that, next, true)).\r\n                  attr('page', next);\r\n          \r\n                if (data.pages[page])\r\n                  data.pages[next] = data.pages[page].\r\n                    flip('options', {\r\n                      page: next,\r\n                      next: (single || odd) ? next+1 : next-1\r\n                    });\r\n    \r\n                if (change) {\r\n                  delete data.pages[page];\r\n                  delete data.pagePlace[page];\r\n                  delete data.pageZoom[page];\r\n                  delete data.pageObjs[page];\r\n                  delete data.pageWrap[page];\r\n                }\r\n    \r\n            }\r\n    \r\n        };\r\n    \r\n        if (change>0)\r\n          for (page=data.totalPages; page>=from; page--)\r\n            move(page);\r\n        else\r\n          for (page=from; page<=data.totalPages; page++)\r\n            move(page);\r\n    \r\n      },\r\n    \r\n      // Sets or Gets the display mode\r\n    \r\n      display: function(display) {\r\n    \r\n        var data = this.data(),\r\n          currentDisplay = data.display;\r\n    \r\n        if (display===undefined) {\r\n          \r\n          return currentDisplay;\r\n    \r\n        } else {\r\n    \r\n          if ($.inArray(display, displays)==-1)\r\n            throw turnError('\"'+display + '\" is not a value for display');\r\n          \r\n          switch(display) {\r\n            case 'single':\r\n    \r\n              // Create a temporal page to use as folded page\r\n    \r\n              if (!data.pageObjs[0]) {\r\n                this.turn('stop').\r\n                  css({'overflow': 'hidden'});\r\n    \r\n                data.pageObjs[0] = $('<div />',\r\n                    {'class': 'page p-temporal'}).\r\n                  css({width: this.width(), height: this.height()}).\r\n                  appendTo(this);\r\n              }\r\n    \r\n              this.addClass('shadow');\r\n    \r\n            break;\r\n            case 'double':\r\n    \r\n              // Remove the temporal page\r\n    \r\n              if (data.pageObjs[0]) {\r\n                this.turn('stop').css({'overflow': ''});\r\n                data.pageObjs[0].remove();\r\n                delete data.pageObjs[0];\r\n              }\r\n    \r\n              this.removeClass('shadow');\r\n    \r\n            break;\r\n          }\r\n          \r\n    \r\n          data.display = display;\r\n    \r\n          if (currentDisplay) {\r\n            var size = this.turn('size');\r\n            turnMethods._movePages.call(this, 1, 0);\r\n            this.turn('size', size.width, size.height).\r\n              turn('update');\r\n          }\r\n    \r\n          return this;\r\n    \r\n        }\r\n      \r\n      },\r\n      \r\n      // Gets and sets the direction of the flipbook\r\n    \r\n      direction: function(dir) {\r\n    \r\n        var data = this.data();\r\n    \r\n        if (dir===undefined) {\r\n    \r\n          return data.direction;\r\n    \r\n        } else {\r\n    \r\n          dir = dir.toLowerCase();\r\n    \r\n          if ($.inArray(dir, directions)==-1)\r\n            throw turnError('\"' + dir + '\" is not a value for direction');\r\n    \r\n          if (dir=='rtl') {\r\n            $(this).attr('dir', 'ltr').\r\n              css({direction: 'ltr'});\r\n          }\r\n    \r\n          data.direction = dir;\r\n    \r\n          if (data.done)\r\n            this.turn('size', $(this).width(), $(this).height());\r\n    \r\n          return this;\r\n        }\r\n    \r\n      },\r\n    \r\n      // Detects animation\r\n    \r\n      animating: function() {\r\n    \r\n        return this.data().pageMv.length>0;\r\n    \r\n      },\r\n    \r\n      // Gets the current activated corner\r\n    \r\n      corner: function() {\r\n        \r\n        var corner,\r\n          page,\r\n          data = this.data();\r\n    \r\n        for (page in data.pages) {\r\n          if (has(page, data.pages))\r\n            if ((corner = data.pages[page].flip('corner'))) {\r\n              return corner;\r\n            }\r\n        }\r\n    \r\n        return false;\r\n      },\r\n    \r\n      // Gets the data stored in the flipbook\r\n    \r\n      data: function() {\r\n        \r\n        return this.data();\r\n    \r\n      },\r\n    \r\n      // Disables and enables the effect\r\n    \r\n      disable: function(disable) {\r\n    \r\n        var page,\r\n          data = this.data(),\r\n          view = this.turn('view');\r\n    \r\n        data.disabled = disable===undefined || disable===true;\r\n    \r\n        for (page in data.pages) {\r\n          if (has(page, data.pages))\r\n            data.pages[page].flip('disable',\r\n              (data.disabled) ? true : $.inArray(parseInt(page, 10), view)==-1);\r\n        }\r\n    \r\n        return this;\r\n    \r\n      },\r\n    \r\n      // Disables and enables the effect\r\n    \r\n      disabled: function(disable) {\r\n    \r\n        if (disable===undefined) {\r\n          return this.data().disabled===true;\r\n        } else {\r\n          return this.turn('disable', disable);\r\n        }\r\n    \r\n      },\r\n    \r\n      // Gets and sets the size\r\n    \r\n      size: function(width, height) {\r\n    \r\n        if (width===undefined || height===undefined) {\r\n          \r\n          return {width: this.width(), height: this.height()};\r\n    \r\n        } else {\r\n    \r\n          this.turn('stop');\r\n    \r\n          var page, prop,\r\n            data = this.data(),\r\n            pageWidth = (data.display=='double') ? width/2 : width;\r\n    \r\n          this.css({width: width, height: height});\r\n    \r\n          if (data.pageObjs[0])\r\n            data.pageObjs[0].css({width: pageWidth, height: height});\r\n          \r\n          for (page in data.pageWrap) {\r\n            if (!has(page, data.pageWrap)) continue;\r\n    \r\n            prop = turnMethods._pageSize.call(this, page, true);\r\n    \r\n            data.pageObjs[page].css({width: prop.width, height: prop.height});\r\n            data.pageWrap[page].css(prop);\r\n            \r\n            if (data.pages[page])\r\n              data.pages[page].css({width: prop.width, height: prop.height});\r\n          }\r\n    \r\n          this.turn('resize');\r\n    \r\n          return this;\r\n    \r\n        }\r\n      },\r\n    \r\n      // Resizes each page\r\n    \r\n      resize: function() {\r\n    \r\n        var page, data = this.data();\r\n    \r\n        if (data.pages[0]) {\r\n          data.pageWrap[0].css({left: -this.width()});\r\n          data.pages[0].flip('resize', true);\r\n        }\r\n    \r\n        for (page = 1; page <= data.totalPages; page++)\r\n          if (data.pages[page])\r\n            data.pages[page].flip('resize', true);\r\n    \r\n        turnMethods._updateShadow.call(this);\r\n    \r\n        if (data.opts.autoCenter)\r\n          this.turn('center');\r\n    \r\n      },\r\n    \r\n      // Removes an animation from the cache\r\n    \r\n      _removeMv: function(page) {\r\n    \r\n        var i, data = this.data();\r\n          \r\n        for (i=0; i<data.pageMv.length; i++)\r\n          if (data.pageMv[i]==page) {\r\n            data.pageMv.splice(i, 1);\r\n            return true;\r\n          }\r\n    \r\n        return false;\r\n    \r\n      },\r\n    \r\n      // Adds an animation to the cache\r\n      \r\n      _addMv: function(page) {\r\n    \r\n        var data = this.data();\r\n    \r\n        turnMethods._removeMv.call(this, page);\r\n        data.pageMv.push(page);\r\n    \r\n      },\r\n    \r\n      // Gets indexes for a view\r\n    \r\n      _view: function(page) {\r\n      \r\n        var data = this.data();\r\n        \r\n        page = page || data.page;\r\n    \r\n        if (data.display=='double')\r\n          return (page%2) ? [page-1, page] : [page, page+1];\r\n        else\r\n          return [page];\r\n    \r\n      },\r\n    \r\n      // Gets a view\r\n    \r\n      view: function(page) {\r\n    \r\n        var data = this.data(),\r\n          view = turnMethods._view.call(this, page);\r\n    \r\n        if (data.display=='double')\r\n          return [(view[0]>0) ? view[0] : 0,\r\n            (view[1]<=data.totalPages) ? view[1] : 0];\r\n        else\r\n          return [(view[0]>0 && view[0]<=data.totalPages) ? view[0] : 0];\r\n    \r\n      },\r\n    \r\n      // Stops animations\r\n    \r\n      stop: function(ignore, animate) {\r\n    \r\n        if (this.turn('animating')) {\r\n      \r\n          var i, opts, page,\r\n            data = this.data();\r\n    \r\n          if (data.tpage) {\r\n            data.page = data.tpage;\r\n            delete data['tpage'];\r\n          }\r\n    \r\n          for (i = 0; i<data.pageMv.length; i++) {\r\n    \r\n            if (!data.pageMv[i] || data.pageMv[i]===ignore)\r\n              continue;\r\n    \r\n            page = data.pages[data.pageMv[i]];\r\n            opts = page.data().f.opts;\r\n    \r\n            page.flip('hideFoldedPage', animate);\r\n    \r\n            if (!animate)\r\n              flipMethods._moveFoldingPage.call(page, false);\r\n    \r\n            if (opts.force) {\r\n              opts.next = (opts.page%2===0) ? opts.page-1 : opts.page+1;\r\n              delete opts['force'];\r\n            }\r\n    \r\n          }\r\n        }\r\n        \r\n        this.turn('update');\r\n    \r\n        return this;\r\n      },\r\n    \r\n      // Gets and sets the number of pages\r\n    \r\n      pages: function(pages) {\r\n    \r\n        var data = this.data();\r\n    \r\n        if (pages) {\r\n    \r\n          if (pages<data.totalPages) {\r\n    \r\n            for (var page = data.totalPages; page>pages; page--)\r\n              this.turn('removePage', page);\r\n    \r\n          }\r\n    \r\n            data.totalPages = pages;\r\n            turnMethods._fitPage.call(this, data.page);\r\n    \r\n          return this;\r\n    \r\n        } else\r\n          return data.totalPages;\r\n    \r\n      },\r\n    \r\n      // Checks missing pages\r\n    \r\n      _missing : function(page) {\r\n        \r\n        var data = this.data();\r\n    \r\n        if (data.totalPages<1)\r\n          return;\r\n    \r\n        var p,\r\n            range = this.turn('range', page),\r\n            missing = [];\r\n    \r\n        for (p = range[0]; p<=range[1]; p++) {\r\n          if (!data.pageObjs[p])\r\n            missing.push(p);\r\n        }\r\n    \r\n        if (missing.length>0)\r\n          this.trigger('missing', [missing]);\r\n    \r\n      },\r\n    \r\n      // Sets a page without effect\r\n    \r\n      _fitPage: function(page) {\r\n    \r\n        var data = this.data(),\r\n          newView = this.turn('view', page);\r\n    \r\n        turnMethods._missing.call(this, page);\r\n        \r\n        if (!data.pageObjs[page])\r\n          return;\r\n    \r\n        data.page = page;\r\n      \r\n        this.turn('stop');\r\n    \r\n        for (var i = 0; i<newView.length; i++) {\r\n    \r\n          if (newView[i] && data.pageZoom[newView[i]]!=data.zoom) {\r\n      \r\n            this.trigger('zoomed',[\r\n              newView[i],\r\n              newView,\r\n              data.pageZoom[newView[i]],\r\n              data.zoom]);\r\n    \r\n            data.pageZoom[newView[i]] = data.zoom;\r\n    \r\n          }\r\n        }\r\n    \r\n        turnMethods._removeFromDOM.call(this);\r\n        turnMethods._makeRange.call(this);\r\n        turnMethods._updateShadow.call(this);\r\n        this.trigger('turned', [page, newView]);\r\n        this.turn('update');\r\n    \r\n        if (data.opts.autoCenter)\r\n          this.turn('center');\r\n    \r\n      },\r\n      \r\n      // Turns the page\r\n    \r\n      _turnPage: function(page) {\r\n    \r\n        var current,\r\n          next,\r\n          data = this.data(),\r\n          place = data.pagePlace[page],\r\n          view = this.turn('view'),\r\n          newView = this.turn('view', page);\r\n    \r\n    \r\n        if (data.page!=page) {\r\n    \r\n          var currentPage = data.page;\r\n    \r\n          if (trigger('turning', this, [page, newView])=='prevented') {\r\n    \r\n            if (currentPage==data.page && $.inArray(place, data.pageMv)!=-1)\r\n              data.pages[place].flip('hideFoldedPage', true);\r\n            \r\n            return;\r\n    \r\n          }\r\n    \r\n          if ($.inArray(1, newView)!=-1)\r\n            this.trigger('first');\r\n          if ($.inArray(data.totalPages, newView)!=-1)\r\n            this.trigger('last');\r\n    \r\n        }\r\n    \r\n        if (data.display=='single') {\r\n          current = view[0];\r\n          next = newView[0];\r\n        } else if (view[1] && page>view[1]) {\r\n          current = view[1];\r\n          next = newView[0];\r\n        } else if (view[0] && page<view[0]) {\r\n          current = view[0];\r\n          next = newView[1];\r\n        }\r\n    \r\n        var optsCorners = data.opts.turnCorners.split(','),\r\n          flipData = data.pages[current].data().f,\r\n          opts = flipData.opts,\r\n          actualPoint = flipData.point;\r\n    \r\n        turnMethods._missing.call(this, page);\r\n        \r\n        if (!data.pageObjs[page])\r\n          return;\r\n    \r\n        this.turn('stop');\r\n    \r\n        data.page = page;\r\n    \r\n        turnMethods._makeRange.call(this);\r\n    \r\n        data.tpage = next;\r\n    \r\n        if (opts.next!=next) {\r\n          opts.next = next;\r\n          opts.force = true;\r\n        }\r\n    \r\n        this.turn('update');\r\n    \r\n        flipData.point = actualPoint;\r\n        \r\n        if (flipData.effect=='hard')\r\n          if (data.direction=='ltr')\r\n            data.pages[current].flip('turnPage',\r\n              (page>current) ? 'r' : 'l');\r\n          else\r\n            data.pages[current].flip('turnPage',\r\n              (page>current) ? 'l' : 'r');\r\n        else {\r\n          if (data.direction=='ltr')\r\n            data.pages[current].flip('turnPage',\r\n              optsCorners[(page>current) ? 1 : 0]);\r\n          else\r\n            data.pages[current].flip('turnPage',\r\n              optsCorners[(page>current) ? 0 : 1]);\r\n        }\r\n    \r\n      },\r\n    \r\n      // Gets and sets a page\r\n    \r\n      page: function(page) {\r\n    \r\n        var data = this.data();\r\n    \r\n        if (page===undefined) {\r\n          \r\n          return data.page;\r\n    \r\n        } else {\r\n    \r\n          if (!data.disabled && !data.destroying) {\r\n    \r\n            page = parseInt(page, 10);\r\n    \r\n            if (page>0 && page<=data.totalPages) {\r\n    \r\n              if (page!=data.page) {\r\n                if (!data.done || $.inArray(page, this.turn('view'))!=-1)\r\n                  turnMethods._fitPage.call(this, page);\r\n                else\r\n                  turnMethods._turnPage.call(this, page);\r\n              }\r\n          \r\n              return this;\r\n    \r\n            } else {\r\n            \r\n              throw turnError('The page ' + page + ' does not exist');\r\n    \r\n            }\r\n    \r\n          }\r\n    \r\n        }\r\n    \r\n      },\r\n    \r\n      // Turns to the next view\r\n    \r\n      next: function() {\r\n    \r\n        return this.turn('page', Math.min(this.data().totalPages,\r\n          turnMethods._view.call(this, this.data().page).pop() + 1));\r\n      \r\n      },\r\n    \r\n      // Turns to the previous view\r\n    \r\n      previous: function() {\r\n    \r\n        return this.turn('page', Math.max(1,\r\n          turnMethods._view.call(this, this.data().page).shift() - 1));\r\n    \r\n      },\r\n    \r\n      // Shows a peeling corner\r\n    \r\n      peel: function(corner, animate) {\r\n        \r\n        var data = this.data(),\r\n          view = this.turn('view');\r\n    \r\n        animate = (animate===undefined) ? true : animate===true;\r\n    \r\n        if (corner===false) {\r\n          \r\n          this.turn('stop', null, animate);\r\n    \r\n        } else {\r\n        \r\n          if (data.display=='single') {\r\n    \r\n            data.pages[data.page].flip('peel', corner, animate);\r\n    \r\n          } else {\r\n    \r\n            var page;\r\n    \r\n            if (data.direction=='ltr') {\r\n              \r\n              page = (corner.indexOf('l')!=-1) ? view[0] : view[1];\r\n    \r\n            } else {\r\n              \r\n              page = (corner.indexOf('l')!=-1) ? view[1] : view[0];\r\n    \r\n            }\r\n            \r\n            if (data.pages[page])\r\n              data.pages[page].flip('peel', corner, animate);\r\n    \r\n          }\r\n        }\r\n    \r\n        return this;\r\n    \r\n      },\r\n    \r\n      // Adds a motion to the internal list\r\n      // This event is called in context of flip\r\n    \r\n      _addMotionPage: function() {\r\n    \r\n        var opts = $(this).data().f.opts,\r\n          turn = opts.turn,\r\n          dd = turn.data();\r\n    \r\n        turnMethods._addMv.call(turn, opts.page);\r\n    \r\n      },\r\n    \r\n      // This event is called in context of flip\r\n    \r\n      _eventStart: function(e, opts, corner) {\r\n    \r\n        var data = opts.turn.data(),\r\n          actualZoom = data.pageZoom[opts.page];\r\n    \r\n        if (e.isDefaultPrevented()) {\r\n          turnMethods._updateShadow.call(opts.turn);\r\n          return;\r\n        }\r\n    \r\n        if (actualZoom && actualZoom!=data.zoom) {\r\n          \r\n          opts.turn.trigger('zoomed',[\r\n            opts.page,\r\n            opts.turn.turn('view', opts.page),\r\n            actualZoom,\r\n            data.zoom]);\r\n    \r\n          data.pageZoom[opts.page] = data.zoom;\r\n    \r\n        }\r\n    \r\n        if (data.display=='single' && corner) {\r\n    \r\n          if ((corner.charAt(1)=='l' && data.direction=='ltr') ||\r\n            (corner.charAt(1)=='r' && data.direction=='rtl'))\r\n          {\r\n            \r\n            opts.next = (opts.next<opts.page) ? opts.next : opts.page-1;\r\n            opts.force = true;\r\n    \r\n          } else {\r\n            \r\n            opts.next = (opts.next>opts.page) ? opts.next : opts.page+1;\r\n    \r\n          }\r\n    \r\n        }\r\n    \r\n        turnMethods._addMotionPage.call(e.target);\r\n        turnMethods._updateShadow.call(opts.turn);\r\n      },\r\n    \r\n      // This event is called in context of flip\r\n    \r\n      _eventEnd: function(e, opts, turned) {\r\n      \r\n        var that = $(e.target),\r\n          data = that.data().f,\r\n          turn = opts.turn,\r\n          dd = turn.data();\r\n    \r\n        if (turned) {\r\n    \r\n          var tpage = dd.tpage || dd.page;\r\n        \r\n          if (tpage==opts.next || tpage==opts.page) {\r\n            delete dd.tpage;\r\n    \r\n            turnMethods._fitPage.call(turn, tpage || opts.next, true);\r\n          }\r\n    \r\n        } else {\r\n          \r\n          turnMethods._removeMv.call(turn, opts.page);\r\n          turnMethods._updateShadow.call(turn);\r\n          turn.turn('update');\r\n    \r\n        }\r\n        \r\n      },\r\n      \r\n      // This event is called in context of flip\r\n    \r\n      _eventPressed: function(e) {\r\n    \r\n        var page,\r\n          data = $(e.target).data().f,\r\n          turn = data.opts.turn,\r\n          turnData = turn.data(),\r\n          pages = turnData.pages;\r\n        \r\n        turnData.mouseAction = true;\r\n    \r\n        turn.turn('update');\r\n    \r\n        return data.time = new Date().getTime();\r\n    \r\n      },\r\n    \r\n      // This event is called in context of flip\r\n    \r\n      _eventReleased: function(e, point) {\r\n    \r\n        var outArea,\r\n          page = $(e.target),\r\n          data = page.data().f,\r\n          turn = data.opts.turn,\r\n          turnData = turn.data();\r\n        \r\n        if (turnData.display=='single') {\r\n          outArea = (point.corner=='br' || point.corner=='tr') ?\r\n            point.x<page.width()/2:\r\n            point.x>page.width()/2;\r\n        } else {\r\n          outArea = point.x<0 || point.x>page.width();\r\n        }\r\n    \r\n        if ((new Date()).getTime()-data.time<200 || outArea) {\r\n    \r\n          e.preventDefault();\r\n          turnMethods._turnPage.call(turn, data.opts.next);\r\n    \r\n        }\r\n    \r\n        turnData.mouseAction = false;\r\n    \r\n      },\r\n    \r\n      // This event is called in context of flip\r\n      \r\n      _flip: function(e) {\r\n    \r\n        e.stopPropagation();\r\n    \r\n        var opts = $(e.target).data().f.opts;\r\n    \r\n        opts.turn.trigger('turn', [opts.next]);\r\n    \r\n        if (opts.turn.data().opts.autoCenter) {\r\n          opts.turn.turn('center', opts.next);\r\n        }\r\n    \r\n      },\r\n    \r\n     //\r\n      _touchStart: function() {\r\n        var data = this.data();\r\n        for (var page in data.pages) {\r\n          if (has(page, data.pages) &&\r\n            flipMethods._eventStart.apply(data.pages[page], arguments)===false) {\r\n              return false;\r\n          }\r\n        }\r\n      },\r\n      \r\n      //\r\n      _touchMove: function() {\r\n        var data = this.data();\r\n        for (var page in data.pages) {\r\n          if (has(page, data.pages)) {\r\n            flipMethods._eventMove.apply(data.pages[page], arguments);\r\n          }\r\n        }\r\n      },\r\n    \r\n      //\r\n      _touchEnd: function() {\r\n        var data = this.data();\r\n        for (var page in data.pages) {\r\n          if (has(page, data.pages)) {\r\n            flipMethods._eventEnd.apply(data.pages[page], arguments);\r\n          }\r\n        }\r\n      },\r\n    \r\n      // Calculate the z-index value for pages during the animation\r\n    \r\n      calculateZ: function(mv) {\r\n    \r\n        var i, page, nextPage, placePage, dpage,\r\n          that = this,\r\n          data = this.data(),\r\n          view = this.turn('view'),\r\n          currentPage = view[0] || view[1],\r\n          total = mv.length-1,\r\n          r = {pageZ: {}, partZ: {}, pageV: {}},\r\n    \r\n          addView = function(page) {\r\n            var view = that.turn('view', page);\r\n            if (view[0]) r.pageV[view[0]] = true;\r\n            if (view[1]) r.pageV[view[1]] = true;\r\n          };\r\n        \r\n        for (i = 0; i<=total; i++) {\r\n          page = mv[i];\r\n          nextPage = data.pages[page].data().f.opts.next;\r\n          placePage = data.pagePlace[page];\r\n          addView(page);\r\n          addView(nextPage);\r\n          dpage = (data.pagePlace[nextPage]==nextPage) ? nextPage : page;\r\n          r.pageZ[dpage] = data.totalPages - Math.abs(currentPage-dpage);\r\n          r.partZ[placePage] = data.totalPages*2 -  total + i;\r\n        }\r\n    \r\n        return r;\r\n      },\r\n    \r\n      // Updates the z-index and display property of every page\r\n    \r\n      update: function() {\r\n    \r\n        var page,\r\n          data = this.data();\r\n    \r\n        if (this.turn('animating') && data.pageMv[0]!==0) {\r\n    \r\n          // Update motion\r\n    \r\n          var p, apage, fixed,\r\n            pos = this.turn('calculateZ', data.pageMv),\r\n            corner = this.turn('corner'),\r\n            actualView = this.turn('view'),\r\n            newView = this.turn('view', data.tpage);\r\n      \r\n          for (page in data.pageWrap) {\r\n    \r\n            if (!has(page, data.pageWrap))\r\n              continue;\r\n    \r\n            fixed = data.pageObjs[page].hasClass('fixed');\r\n    \r\n            data.pageWrap[page].css({\r\n              display: (pos.pageV[page] || fixed) ? '' : 'none',\r\n              zIndex:\r\n                (data.pageObjs[page].hasClass('hard') ?\r\n                  pos.partZ[page]\r\n                  :\r\n                  pos.pageZ[page]\r\n                ) || (fixed ? -1 : 0)\r\n            });\r\n    \r\n            if ((p = data.pages[page])) {\r\n    \r\n              p.flip('z', pos.partZ[page] || null);\r\n    \r\n              if (pos.pageV[page])\r\n                p.flip('resize');\r\n              \r\n              if (data.tpage) { // Is it turning the page to `tpage`?\r\n    \r\n                p.flip('hover', false).\r\n                  flip('disable',\r\n                    $.inArray(parseInt(page, 10), data.pageMv)==-1 &&\r\n                    page!=newView[0] &&\r\n                    page!=newView[1]);\r\n    \r\n              } else {\r\n    \r\n                p.flip('hover', corner===false).\r\n                  flip('disable', page!=actualView[0] && page!=actualView[1]);\r\n    \r\n              }\r\n    \r\n            }\r\n    \r\n          }\r\n    \r\n        } else {\r\n    \r\n          // Update static pages\r\n    \r\n          for (page in data.pageWrap) {\r\n    \r\n            if (!has(page, data.pageWrap))\r\n              continue;\r\n    \r\n            var pageLocation = turnMethods._setPageLoc.call(this, page);\r\n    \r\n            if (data.pages[page]) {\r\n              data.pages[page].\r\n                flip('disable', data.disabled || pageLocation!=1).\r\n                flip('hover', true).\r\n                flip('z', null);\r\n            }\r\n          }\r\n        }\r\n    \r\n        return this;\r\n      },\r\n    \r\n      // Updates the position and size of the flipbook's shadow\r\n    \r\n      _updateShadow: function() {\r\n        \r\n        var view, view2, shadow,\r\n          data = this.data(),\r\n          width = this.width(),\r\n          height = this.height(),\r\n          pageWidth = (data.display=='single') ? width : width/2;\r\n    \r\n        view = this.turn('view');\r\n    \r\n        if (!data.shadow) {\r\n          data.shadow = $('<div />', {\r\n              'class': 'shadow',\r\n              'css': divAtt(0, 0, 0).css\r\n            }).\r\n            appendTo(this);\r\n        }\r\n    \r\n        for (var i = 0; i<data.pageMv.length; i++) {\r\n          if (!view[0] || !view[1])\r\n            break;\r\n        \r\n          view = this.turn('view', data.pages[data.pageMv[i]].data().f.opts.next);\r\n          view2 = this.turn('view', data.pageMv[i]);\r\n    \r\n          view[0] = view[0] && view2[0];\r\n          view[1] = view[1] && view2[1];\r\n        }\r\n    \r\n        if (!view[0]) shadow = (data.direction=='ltr') ? 1 : 2;\r\n        else if (!view[1]) shadow = (data.direction=='ltr') ? 2 : 1;\r\n        else shadow = 3;\r\n    \r\n        switch (shadow) {\r\n          case 1:\r\n            data.shadow.css({\r\n              width: pageWidth,\r\n              height: height,\r\n              top: 0,\r\n              left: pageWidth\r\n            });\r\n            break;\r\n          case 2:\r\n            data.shadow.css({\r\n              width: pageWidth,\r\n              height: height,\r\n              top: 0,\r\n              left: 0\r\n            });\r\n            break;\r\n          case 3:\r\n            data.shadow.css({\r\n              width: width,\r\n              height: height,\r\n              top: 0,\r\n              left: 0\r\n            });\r\n            break;\r\n        }\r\n    \r\n      },\r\n    \r\n      // Sets the z-index and display property of a page\r\n      // It depends on the current view\r\n    \r\n      _setPageLoc: function(page) {\r\n    \r\n        var data = this.data(),\r\n          view = this.turn('view'),\r\n          loc = 0;\r\n    \r\n        \r\n        if (page==view[0] || page==view[1])\r\n          loc = 1;\r\n        else if (\r\n          (data.display=='single' && page==view[0]+1) ||\r\n          (data.display=='double' && page==view[0]-2 || page==view[1]+2)\r\n        )\r\n          loc = 2;\r\n    \r\n        if (!this.turn('animating'))\r\n          switch (loc) {\r\n            case 1:\r\n              data.pageWrap[page].css(\r\n              {\r\n                zIndex: data.totalPages,\r\n                display: ''\r\n              });\r\n            break;\r\n            case 2:\r\n              data.pageWrap[page].css(\r\n              {\r\n                zIndex: data.totalPages-1,\r\n                display: ''\r\n              });\r\n            break;\r\n            case 0:\r\n              data.pageWrap[page].css(\r\n              {\r\n                zIndex: 0,\r\n                display: (data.pageObjs[page].hasClass('fixed')) ? '' : 'none'}\r\n              );\r\n            break;\r\n          }\r\n        \r\n        return loc;\r\n      },\r\n    \r\n      // Gets and sets the options\r\n    \r\n      options: function(options) {\r\n        \r\n        if (options===undefined) {\r\n          \r\n          return this.data().opts;\r\n    \r\n        } else {\r\n    \r\n          var data = this.data();\r\n    \r\n          // Set new values\r\n    \r\n          $.extend(data.opts, options);\r\n          \r\n          // Set pages\r\n    \r\n          if (options.pages)\r\n            this.turn('pages', options.pages);\r\n    \r\n          // Set page\r\n    \r\n          if (options.page)\r\n            this.turn('page', options.page);\r\n    \r\n          // Set display\r\n    \r\n          if (options.display)\r\n            this.turn('display', options.display);\r\n          \r\n          // Set direction\r\n    \r\n          if (options.direction)\r\n            this.turn('direction', options.direction);\r\n    \r\n          // Set size\r\n    \r\n          if (options.width && options.height)\r\n            this.turn('size', options.width, options.height);\r\n          \r\n          // Add event listeners\r\n    \r\n          if (options.when)\r\n            for (var eventName in options.when)\r\n              if (has(eventName, options.when)) {\r\n                this.unbind(eventName).\r\n                  bind(eventName, options.when[eventName]);\r\n              }\r\n    \r\n          return this;\r\n        }\r\n    \r\n      },\r\n    \r\n      // Gets the current version\r\n    \r\n      version: function() {\r\n    \r\n        return version;\r\n    \r\n      }\r\n    },\r\n    \r\n    // Methods and properties for the flip page effect\r\n    \r\n    flipMethods = {\r\n    \r\n      // Constructor\r\n    \r\n      init: function(opts) {\r\n    \r\n        this.data({f: {\r\n          disabled: false,\r\n          hover: false,\r\n          effect: (this.hasClass('hard')) ? 'hard' : 'sheet'\r\n        }});\r\n      \r\n        this.flip('options', opts);\r\n    \r\n        flipMethods._addPageWrapper.call(this);\r\n    \r\n        return this;\r\n      },\r\n    \r\n      setData: function(d) {\r\n        \r\n        var data = this.data();\r\n    \r\n        data.f = $.extend(data.f, d);\r\n    \r\n        return this;\r\n      },\r\n    \r\n      options: function(opts) {\r\n        \r\n        var data = this.data().f;\r\n    \r\n        if (opts) {\r\n          flipMethods.setData.call(this,\r\n            {opts: $.extend({}, data.opts || flipOptions, opts)});\r\n          return this;\r\n        } else\r\n          return data.opts;\r\n    \r\n      },\r\n    \r\n      z: function(z) {\r\n        \r\n        var data = this.data().f;\r\n    \r\n        data.opts['z-index'] = z;\r\n    \r\n        if (data.fwrapper)\r\n          data.fwrapper.css({\r\n            zIndex: z || parseInt(data.parent.css('z-index'), 10) || 0\r\n          });\r\n    \r\n        return this;\r\n      },\r\n    \r\n      _cAllowed: function() {\r\n        \r\n        var data = this.data().f,\r\n          page = data.opts.page,\r\n          turnData = data.opts.turn.data(),\r\n          odd = page%2;\r\n        \r\n        if (data.effect=='hard') {\r\n        \r\n          return (turnData.direction=='ltr') ?\r\n            [(odd) ? 'r' : 'l'] :\r\n            [(odd) ? 'l' : 'r'];\r\n    \r\n        } else {\r\n    \r\n          if (turnData.display=='single') {\r\n    \r\n            if (page==1)\r\n              return (turnData.direction=='ltr') ?\r\n                corners['forward'] : corners['backward'];\r\n            else if (page==turnData.totalPages)\r\n              return (turnData.direction=='ltr') ?\r\n                corners['backward'] : corners['forward'];\r\n            else\r\n              return corners['all'];\r\n    \r\n          } else {\r\n    \r\n            return (turnData.direction=='ltr') ?\r\n              corners[(odd) ? 'forward' : 'backward']\r\n              :\r\n              corners[(odd) ? 'backward' : 'forward'];\r\n    \r\n          }\r\n    \r\n        }\r\n    \r\n      },\r\n    \r\n      _cornerActivated: function(p) {\r\n    \r\n        var data = this.data().f,\r\n          width = this.width(),\r\n          height = this.height(),\r\n          point = {x: p.x, y: p.y, corner: ''},\r\n          csz = data.opts.cornerSize;\r\n    \r\n        if (point.x<=0 || point.y<=0 || point.x>=width || point.y>=height)\r\n          return false;\r\n    \r\n        var allowedCorners = flipMethods._cAllowed.call(this);\r\n    \r\n        switch (data.effect) {\r\n          case 'hard':\r\n            \r\n            if (point.x>width-csz)\r\n              point.corner = 'r';\r\n            else if (point.x<csz)\r\n              point.corner = 'l';\r\n            else\r\n              return false;\r\n                \r\n            break;\r\n    \r\n          case 'sheet':\r\n            \r\n            if (point.y<csz)\r\n              point.corner+= 't';\r\n            else if (point.y>=height-csz)\r\n              point.corner+= 'b';\r\n            else\r\n              return false;\r\n        \r\n            if (point.x<=csz)\r\n              point.corner+= 'l';\r\n            else if (point.x>=width-csz)\r\n              point.corner+= 'r';\r\n            else\r\n              return false;\r\n         \r\n            break;\r\n          }\r\n    \r\n        return (!point.corner || $.inArray(point.corner, allowedCorners)==-1) ?\r\n          false : point;\r\n    \r\n      },\r\n    \r\n      _isIArea: function(e) {\r\n    \r\n        var pos = this.data().f.parent.offset();\r\n    \r\n        e = (isTouch && e.originalEvent) ? e.originalEvent.touches[0] : e;\r\n    \r\n        return flipMethods._cornerActivated.call(this,\r\n          {\r\n            x: e.pageX-pos.left,\r\n            y: e.pageY-pos.top\r\n          });\r\n    \r\n      },\r\n    \r\n      _c: function(corner, opts) {\r\n    \r\n        opts = opts || 0;\r\n    \r\n        switch (corner) {\r\n          case 'tl':\r\n            return point2D(opts, opts);\r\n          case 'tr':\r\n            return point2D(this.width()-opts, opts);\r\n          case 'bl':\r\n            return point2D(opts, this.height()-opts);\r\n          case 'br':\r\n            return point2D(this.width()-opts, this.height()-opts);\r\n          case 'l':\r\n            return point2D(opts, 0);\r\n          case 'r':\r\n            return point2D(this.width()-opts, 0);\r\n        }\r\n    \r\n      },\r\n    \r\n      _c2: function(corner) {\r\n    \r\n        switch (corner) {\r\n          case 'tl':\r\n            return point2D(this.width()*2, 0);\r\n          case 'tr':\r\n            return point2D(-this.width(), 0);\r\n          case 'bl':\r\n            return point2D(this.width()*2, this.height());\r\n          case 'br':\r\n            return point2D(-this.width(), this.height());\r\n          case 'l':\r\n            return point2D(this.width()*2, 0);\r\n          case 'r':\r\n            return point2D(-this.width(), 0);\r\n        }\r\n    \r\n      },\r\n    \r\n      _foldingPage: function() {\r\n    \r\n        var data = this.data().f;\r\n    \r\n        if (!data)\r\n          return;\r\n    \r\n        var opts = data.opts;\r\n    \r\n        if (opts.turn) {\r\n          data = opts.turn.data();\r\n          if (data.display == 'single')\r\n            return (opts.next>1 || opts.page>1) ? data.pageObjs[0] : null;\r\n          else\r\n            return data.pageObjs[opts.next];\r\n        }\r\n    \r\n      },\r\n    \r\n      _backGradient: function() {\r\n    \r\n        var data = this.data().f,\r\n          turnData = data.opts.turn.data(),\r\n          gradient =  turnData.opts.gradients && (turnData.display=='single' ||\r\n             (data.opts.page!=2 && data.opts.page!=turnData.totalPages-1));\r\n    \r\n        if (gradient && !data.bshadow)\r\n          data.bshadow = $('<div/>', divAtt(0, 0, 1)).\r\n            css({'position': '', width: this.width(), height: this.height()}).\r\n            appendTo(data.parent);\r\n    \r\n        return gradient;\r\n    \r\n      },\r\n    \r\n      type: function () {\r\n        \r\n        return this.data().f.effect;\r\n    \r\n      },\r\n    \r\n      resize: function(full) {\r\n        \r\n        var data = this.data().f,\r\n          turnData = data.opts.turn.data(),\r\n          width = this.width(),\r\n          height = this.height();\r\n    \r\n        switch (data.effect) {\r\n          case 'hard':\r\n            \r\n          if (full) {\r\n            data.wrapper.css({width: width, height: height});\r\n            data.fpage.css({width: width, height: height});\r\n            if (turnData.opts.gradients) {\r\n              data.ashadow.css({width: width, height: height});\r\n              data.bshadow.css({width: width, height: height});\r\n            }\r\n          }\r\n    \r\n          break;\r\n          case 'sheet':\r\n    \r\n          if (full) {\r\n            var size = Math.round(Math.sqrt(Math.pow(width, 2)+Math.pow(height, 2)));\r\n    \r\n            data.wrapper.css({width: size, height: size});\r\n            data.fwrapper.css({width: size, height: size}).\r\n              children(':first-child').\r\n              css({width: width, height: height});\r\n    \r\n            data.fpage.css({width: width, height: height});\r\n    \r\n            if (turnData.opts.gradients)\r\n              data.ashadow.css({width: width, height: height});\r\n    \r\n            if (flipMethods._backGradient.call(this))\r\n              data.bshadow.css({width: width, height: height});\r\n          }\r\n    \r\n          if (data.parent.is(':visible')) {\r\n            var offset = findPos(data.parent[0]);\r\n    \r\n            data.fwrapper.css({top: offset.top,\r\n              left: offset.left});\r\n    \r\n            //if (data.opts.turn) {\r\n             offset = findPos(data.opts.turn[0]);\r\n             data.fparent.css({top: -offset.top, left: -offset.left});\r\n            //}\r\n          }\r\n    \r\n          this.flip('z', data.opts['z-index']);\r\n    \r\n          break;\r\n        }\r\n    \r\n      },\r\n    \r\n      // Prepares the page by adding a general wrapper and another objects\r\n    \r\n      _addPageWrapper: function() {\r\n    \r\n        var att,\r\n          data = this.data().f,\r\n          turnData = data.opts.turn.data(),\r\n          parent = this.parent();\r\n    \r\n        data.parent = parent;\r\n    \r\n      if (!data.wrapper)\r\n        switch (data.effect) {\r\n          case 'hard':\r\n            \r\n            var cssProperties = {};\r\n            cssProperties[vendor + 'transform-style'] = 'preserve-3d';\r\n            cssProperties[vendor + 'backface-visibility'] = 'hidden';\r\n    \r\n            data.wrapper = $('<div/>', divAtt(0, 0, 2)).\r\n              css(cssProperties).\r\n              appendTo(parent).\r\n              prepend(this);\r\n    \r\n            data.fpage = $('<div/>', divAtt(0, 0, 1)).\r\n              css(cssProperties).\r\n              appendTo(parent);\r\n            \r\n            if (turnData.opts.gradients) {\r\n              data.ashadow = $('<div/>', divAtt(0, 0,  0)).\r\n                hide().\r\n                appendTo(parent);\r\n    \r\n              data.bshadow = $('<div/>', divAtt(0, 0,  0));\r\n            }\r\n    \r\n          break;\r\n          case 'sheet':\r\n            \r\n            var width = this.width(),\r\n              height = this.height(),\r\n              size = Math.round(Math.sqrt(Math.pow(width, 2)+Math.pow(height, 2)));\r\n            \r\n            data.fparent = data.opts.turn.data().fparent;\r\n    \r\n            if (!data.fparent) {\r\n              var fparent = $('<div/>', {css: {'pointer-events': 'none'}}).hide();\r\n                fparent.data().flips = 0;\r\n                fparent.css(divAtt(0, 0, 'auto', 'visible').css).\r\n                appendTo(data.opts.turn);\r\n                \r\n                data.opts.turn.data().fparent = fparent;\r\n                data.fparent = fparent;\r\n            }\r\n    \r\n            this.css({position: 'absolute', top: 0, left: 0, bottom: 'auto', right: 'auto'});\r\n    \r\n            data.wrapper = $('<div/>', divAtt(0, 0, this.css('z-index'))).\r\n              appendTo(parent).\r\n              prepend(this);\r\n    \r\n            data.fwrapper = $('<div/>', divAtt(parent.offset().top, parent.offset().left)).\r\n              hide().\r\n              appendTo(data.fparent);\r\n    \r\n            data.fpage = $('<div/>', divAtt(0, 0, 0, 'visible')).\r\n              css({cursor: 'default'}).\r\n              appendTo(data.fwrapper);\r\n    \r\n            if (turnData.opts.gradients)\r\n              data.ashadow = $('<div/>', divAtt(0, 0,  1)).\r\n              appendTo(data.fpage);\r\n    \r\n            flipMethods.setData.call(this, data);\r\n    \r\n          break;\r\n        }\r\n    \r\n        // Set size\r\n        flipMethods.resize.call(this, true);\r\n    \r\n      },\r\n    \r\n      // Takes a 2P point from the screen and applies the transformation\r\n    \r\n      _fold: function(point) {\r\n    \r\n        var data = this.data().f,\r\n          turnData = data.opts.turn.data(),\r\n          o = flipMethods._c.call(this, point.corner),\r\n          width = this.width(),\r\n          height = this.height();\r\n    \r\n        switch (data.effect) {\r\n    \r\n          case 'hard':\r\n    \r\n            if (point.corner=='l')\r\n              point.x = Math.min(Math.max(point.x, 0), width*2);\r\n            else\r\n              point.x = Math.max(Math.min(point.x, width), -width);\r\n    \r\n            var leftPos,\r\n              shadow,\r\n              gradientX,\r\n              fpageOrigin,\r\n              parentOrigin,\r\n              totalPages = turnData.totalPages,\r\n              zIndex = data.opts['z-index'] || totalPages,\r\n              parentCss = {'overflow': 'visible'},\r\n              relX = (o.x) ? (o.x - point.x)/width : point.x/width,\r\n              angle = relX * 90,\r\n              half = angle<90;\r\n    \r\n            switch (point.corner) {\r\n              case 'l':\r\n    \r\n                fpageOrigin =  '0% 50%';\r\n                parentOrigin =  '100% 50%';\r\n    \r\n                if (half) {\r\n                  leftPos = 0;\r\n                  shadow = data.opts.next-1>0;\r\n                  gradientX = 1;\r\n                } else {\r\n                  leftPos = '100%';\r\n                  shadow = data.opts.page+1<totalPages;\r\n                  gradientX = 0;\r\n                }\r\n    \r\n              break;\r\n              case 'r':\r\n    \r\n                fpageOrigin =  '100% 50%';\r\n                parentOrigin =  '0% 50%';\r\n                angle = -angle;\r\n                width = -width;\r\n    \r\n                if (half) {\r\n                  leftPos = 0;\r\n                  shadow = data.opts.next+1<totalPages;\r\n                  gradientX = 0;\r\n                } else {\r\n                  leftPos = '-100%';\r\n                  shadow = data.opts.page!=1;\r\n                  gradientX = 1;\r\n                }\r\n    \r\n              break;\r\n            }\r\n    \r\n            parentCss[vendor+'perspective-origin'] = parentOrigin;\r\n    \r\n            data.wrapper.transform('rotateY('+angle+'deg)' +\r\n              'translate3d(0px, 0px, '+(this.attr('depth')||0)+'px)', parentOrigin);\r\n    \r\n            data.fpage.transform('translateX('+width+'px) rotateY('+(180+angle)+'deg)', fpageOrigin);\r\n    \r\n            data.parent.css(parentCss);\r\n    \r\n            if (half) {\r\n              relX = -relX+1;\r\n              data.wrapper.css({zIndex: zIndex+1});\r\n              data.fpage.css({zIndex: zIndex});\r\n            } else {\r\n              relX = relX-1;\r\n              data.wrapper.css({zIndex: zIndex});\r\n              data.fpage.css({zIndex: zIndex+1});\r\n            }\r\n    \r\n            if (turnData.opts.gradients) {\r\n              if (shadow)\r\n                data.ashadow.css({\r\n                  display: '',\r\n                  left: leftPos,\r\n                  backgroundColor: 'rgba(0,0,0,'+(0.5*relX)+')'\r\n                }).\r\n                transform('rotateY(0deg)');\r\n              else\r\n                data.ashadow.hide();\r\n    \r\n              data.bshadow.css({opacity:-relX + 1});\r\n    \r\n              if (half) {\r\n                if (data.bshadow.parent()[0]!=data.wrapper[0]) {\r\n                  data.bshadow.appendTo(data.wrapper);\r\n                }\r\n              } else {\r\n                if (data.bshadow.parent()[0]!=data.fpage[0]) {\r\n                  data.bshadow.appendTo(data.fpage);\r\n                }\r\n              }\r\n              /*data.bshadow.css({\r\n                backgroundColor: 'rgba(0,0,0,'+(0.1)+')'\r\n              })*/\r\n              gradient(data.bshadow, point2D(gradientX * 100, 0), point2D((-gradientX + 1)*100, 0),\r\n                [[0, 'rgba(0,0,0,0.3)'],[1, 'rgba(0,0,0,0)']],2);\r\n              \r\n            }\r\n    \r\n            break;\r\n          case 'sheet':\r\n    \r\n            var that = this,\r\n              a = 0,\r\n              alpha = 0,\r\n              beta,\r\n              px,\r\n              gradientEndPointA,\r\n              gradientEndPointB,\r\n              gradientStartVal,\r\n              gradientSize,\r\n              gradientOpacity,\r\n              shadowVal,\r\n              mv = point2D(0, 0),\r\n              df = point2D(0, 0),\r\n              tr = point2D(0, 0),\r\n              folding = flipMethods._foldingPage.call(this),\r\n              tan = Math.tan(alpha),\r\n              ac = turnData.opts.acceleration,\r\n              h = data.wrapper.height(),\r\n              top = point.corner.substr(0, 1) == 't',\r\n              left = point.corner.substr(1, 1) == 'l',\r\n    \r\n          compute = function() {\r\n    \r\n            var rel = point2D(0, 0);\r\n            var middle = point2D(0, 0);\r\n    \r\n            rel.x = (o.x) ? o.x - point.x : point.x;\r\n    \r\n            if (!hasRot) {\r\n              rel.y = 0;\r\n            } else {\r\n              rel.y = (o.y) ? o.y - point.y : point.y;\r\n            }\r\n    \r\n            middle.x = (left)? width - rel.x/2 : point.x + rel.x/2;\r\n            middle.y = rel.y/2;\r\n            \r\n            var alpha =  A90-Math.atan2(rel.y, rel.x),\r\n              gamma = alpha - Math.atan2(middle.y, middle.x),\r\n              distance =  Math.max(0, Math.sin(gamma) * Math.sqrt(Math.pow(middle.x, 2) + Math.pow(middle.y, 2)));\r\n              \r\n              a = deg(alpha);\r\n    \r\n              tr = point2D(distance * Math.sin(alpha), distance * Math.cos(alpha));\r\n    \r\n              if (alpha > A90) {\r\n                tr.x = tr.x + Math.abs(tr.y * rel.y/rel.x);\r\n                tr.y = 0;\r\n                if (Math.round(tr.x*Math.tan(PI-alpha)) < height) {\r\n                  point.y = Math.sqrt(Math.pow(height, 2)+2 * middle.x * rel.x);\r\n                  if (top) point.y =  height - point.y;\r\n                  return compute();\r\n                }\r\n              }\r\n          \r\n              if (alpha>A90) {\r\n                var beta = PI-alpha, dd = h - height/Math.sin(beta);\r\n                mv = point2D(Math.round(dd*Math.cos(beta)), Math.round(dd*Math.sin(beta)));\r\n                if (left) mv.x = - mv.x;\r\n                if (top) mv.y = - mv.y;\r\n              }\r\n    \r\n              px = Math.round(tr.y/Math.tan(alpha) + tr.x);\r\n          \r\n              var side = width - px,\r\n                sideX = side*Math.cos(alpha*2),\r\n                sideY = side*Math.sin(alpha*2);\r\n                df = point2D(\r\n                  Math.round((left ? side -sideX : px+sideX)),\r\n                  Math.round((top) ? sideY : height - sideY));\r\n              \r\n            // Gradients\r\n              if (turnData.opts.gradients) {\r\n    \r\n                gradientSize = side*Math.sin(alpha);\r\n    \r\n                var endingPoint = flipMethods._c2.call(that, point.corner),\r\n                 far = Math.sqrt(Math.pow(endingPoint.x-point.x, 2)+Math.pow(endingPoint.y-point.y, 2))/width;\r\n    \r\n                shadowVal = Math.sin(A90*((far>1) ? 2 - far : far));\r\n    \r\n                gradientOpacity = Math.min(far, 1);\r\n    \r\n               \r\n                  gradientStartVal = gradientSize>100 ? (gradientSize-100)/gradientSize : 0;\r\n    \r\n                  gradientEndPointA = point2D(\r\n                    gradientSize*Math.sin(alpha)/width*100,\r\n                    gradientSize*Math.cos(alpha)/height*100);\r\n               \r\n    \r\n                  if (flipMethods._backGradient.call(that)) {\r\n    \r\n                    gradientEndPointB = point2D(\r\n                      gradientSize*1.2*Math.sin(alpha)/width*100,\r\n                      gradientSize*1.2*Math.cos(alpha)/height*100);\r\n    \r\n                    if (!left) gradientEndPointB.x = 100-gradientEndPointB.x;\r\n                    if (!top) gradientEndPointB.y = 100-gradientEndPointB.y;\r\n    \r\n                  }\r\n    \r\n              }\r\n    \r\n              tr.x = Math.round(tr.x);\r\n              tr.y = Math.round(tr.y);\r\n    \r\n            return true;\r\n          },\r\n    \r\n          transform = function(tr, c, x, a) {\r\n          \r\n            var f = ['0', 'auto'], mvW = (width-h)*x[0]/100, mvH = (height-h)*x[1]/100,\r\n              cssA = {left: f[c[0]], top: f[c[1]], right: f[c[2]], bottom: f[c[3]]},\r\n              cssB = {},\r\n              aliasingFk = (a!=90 && a!=-90) ? (left ? -1 : 1) : 0,\r\n              origin = x[0] + '% ' + x[1] + '%';\r\n    \r\n            that.css(cssA).\r\n              transform(rotate(a) + translate(tr.x + aliasingFk, tr.y, ac), origin);\r\n    \r\n            data.fpage.css(cssA).transform(\r\n              rotate(a) +\r\n              translate(tr.x + df.x - mv.x - width*x[0]/100, tr.y + df.y - mv.y - height*x[1]/100, ac) +\r\n              rotate((180/a - 2)*a),\r\n              origin);\r\n    \r\n            data.wrapper.transform(translate(-tr.x + mvW-aliasingFk, -tr.y + mvH, ac) + rotate(-a), origin);\r\n    \r\n            data.fwrapper.transform(translate(-tr.x + mv.x + mvW, -tr.y + mv.y + mvH, ac) + rotate(-a), origin);\r\n          \r\n            if (turnData.opts.gradients) {\r\n    \r\n              if (x[0])\r\n                gradientEndPointA.x = 100-gradientEndPointA.x;\r\n    \r\n              if (x[1])\r\n                gradientEndPointA.y = (100-gradientEndPointA.y);\r\n    \r\n              cssB['box-shadow'] = '0 0 20px rgba(0,0,0,'+(0.5*shadowVal)+')';\r\n              folding.css(cssB);\r\n    \r\n              gradient(data.ashadow,\r\n                  point2D(left?100:0, top?0:100),\r\n                  point2D(gradientEndPointA.x, gradientEndPointA.y),\r\n                  [[gradientStartVal, 'rgba(0,0,0,0)'],\r\n                  [((1-gradientStartVal)*0.8)+gradientStartVal, 'rgba(0,0,0,'+(0.2*gradientOpacity)+')'],\r\n                  [1, 'rgba(255,255,255,'+(0.2*gradientOpacity)+')']],\r\n                  3,\r\n                  alpha);\r\n    \r\n              if (flipMethods._backGradient.call(that))\r\n                gradient(data.bshadow,\r\n                    point2D(left?0:100, top?0:100),\r\n                    point2D(gradientEndPointB.x, gradientEndPointB.y),\r\n                    [[0.6, 'rgba(0,0,0,0)'],\r\n                    [0.8, 'rgba(0,0,0,'+(0.3*gradientOpacity)+')'],\r\n                    [1, 'rgba(0,0,0,0)']\r\n                    ],\r\n                    3);\r\n            }\r\n    \r\n          };\r\n    \r\n          switch (point.corner) {\r\n            case 'l' :\r\n    \r\n    \r\n            break;\r\n            case 'r' :\r\n    \r\n    \r\n            break;\r\n            case 'tl' :\r\n              point.x = Math.max(point.x, 1);\r\n              compute();\r\n              transform(tr, [1,0,0,1], [100, 0], a);\r\n            break;\r\n            case 'tr' :\r\n              point.x = Math.min(point.x, width-1);\r\n              compute();\r\n              transform(point2D(-tr.x, tr.y), [0,0,0,1], [0, 0], -a);\r\n            break;\r\n            case 'bl' :\r\n              point.x = Math.max(point.x, 1);\r\n              compute();\r\n              transform(point2D(tr.x, -tr.y), [1,1,0,0], [100, 100], -a);\r\n            break;\r\n            case 'br' :\r\n              point.x = Math.min(point.x, width-1);\r\n              compute();\r\n              transform(point2D(-tr.x, -tr.y), [0,1,1,0], [0, 100], a);\r\n            break;\r\n          }\r\n    \r\n        break;\r\n      }\r\n    \r\n        data.point = point;\r\n      \r\n      },\r\n    \r\n      _moveFoldingPage: function(move) {\r\n    \r\n        var data = this.data().f;\r\n    \r\n        if (!data)\r\n          return;\r\n    \r\n        var turn = data.opts.turn,\r\n          turnData = turn.data(),\r\n          place = turnData.pagePlace;\r\n          \r\n        if (move) {\r\n    \r\n          var nextPage = data.opts.next;\r\n      \r\n          if (place[nextPage]!=data.opts.page) {\r\n    \r\n            if (data.folding)\r\n              flipMethods._moveFoldingPage.call(this, false);\r\n    \r\n            var folding = flipMethods._foldingPage.call(this);\r\n            \r\n            folding.appendTo(data.fpage);\r\n            place[nextPage] = data.opts.page;\r\n            data.folding = nextPage;\r\n          }\r\n    \r\n          turn.turn('update');\r\n    \r\n        } else {\r\n    \r\n          if (data.folding) {\r\n    \r\n            if (turnData.pages[data.folding]) {\r\n             \r\n              // If we have flip available\r\n    \r\n              var flipData = turnData.pages[data.folding].data().f;\r\n              \r\n              turnData.pageObjs[data.folding].\r\n                appendTo(flipData.wrapper);\r\n    \r\n            } else if (turnData.pageWrap[data.folding]) {\r\n              \r\n              // If we have the pageWrapper\r\n    \r\n              turnData.pageObjs[data.folding].\r\n                appendTo(turnData.pageWrap[data.folding]);\r\n    \r\n            }\r\n    \r\n            if (data.folding in place) {\r\n              place[data.folding] = data.folding;\r\n            }\r\n    \r\n            delete data.folding;\r\n    \r\n          }\r\n        }\r\n      },\r\n    \r\n      _showFoldedPage: function(c, animate) {\r\n    \r\n        var folding = flipMethods._foldingPage.call(this),\r\n          dd = this.data(),\r\n          data = dd.f,\r\n          visible = data.visible;\r\n    \r\n        if (folding) {\r\n    \r\n          if (!visible || !data.point || data.point.corner!=c.corner) {\r\n    \r\n            var corner = (\r\n              data.status=='hover' ||\r\n              data.status=='peel' ||\r\n              data.opts.turn.data().mouseAction) ?\r\n            c.corner : null;\r\n    \r\n            visible = false;\r\n    \r\n            if (trigger('start', this, [data.opts, corner])=='prevented')\r\n              return false;\r\n    \r\n          }\r\n    \r\n          if (animate) {\r\n            \r\n            var that = this,\r\n              point = (data.point && data.point.corner==c.corner) ?\r\n              data.point : flipMethods._c.call(this, c.corner, 1);\r\n          \r\n            this.animatef({\r\n              from: [point.x, point.y],\r\n              to: [c.x, c.y],\r\n              duration: 500,\r\n              frame: function(v) {\r\n                c.x = Math.round(v[0]);\r\n                c.y = Math.round(v[1]);\r\n                flipMethods._fold.call(that, c);\r\n              }\r\n            });\r\n    \r\n          } else  {\r\n    \r\n            flipMethods._fold.call(this, c);\r\n    \r\n            if (dd.effect && !dd.effect.turning)\r\n              this.animatef(false);\r\n    \r\n          }\r\n    \r\n          if (!visible) {\r\n    \r\n            switch(data.effect) {\r\n              case 'hard':\r\n    \r\n                data.visible = true;\r\n                flipMethods._moveFoldingPage.call(this, true);\r\n                data.fpage.show();\r\n                if (data.opts.shadows)\r\n                  data.bshadow.show();\r\n    \r\n              break;\r\n              case 'sheet':\r\n    \r\n                data.visible = true;\r\n                data.fparent.show().data().flips++;\r\n                flipMethods._moveFoldingPage.call(this, true);\r\n                data.fwrapper.show();\r\n                if (data.bshadow)\r\n                  data.bshadow.show();\r\n    \r\n              break;\r\n            }\r\n    \r\n          }\r\n    \r\n          return true;\r\n    \r\n        }\r\n    \r\n        return false;\r\n      },\r\n    \r\n      hide: function() {\r\n    \r\n        var data = this.data().f,\r\n          turnData = data.opts.turn.data(),\r\n          folding = flipMethods._foldingPage.call(this);\r\n    \r\n        switch (data.effect) {\r\n          case 'hard':\r\n            \r\n            if (turnData.opts.gradients) {\r\n              data.bshadowLoc = 0;\r\n              data.bshadow.remove();\r\n              data.ashadow.hide();\r\n            }\r\n    \r\n            data.wrapper.transform('');\r\n            data.fpage.hide();\r\n    \r\n          break;\r\n          case 'sheet':\r\n    \r\n            if ((--data.fparent.data().flips)===0)\r\n              data.fparent.hide();\r\n    \r\n            this.css({left: 0, top: 0, right: 'auto', bottom: 'auto'}).\r\n              transform('');\r\n    \r\n            data.wrapper.transform('');\r\n    \r\n            data.fwrapper.hide();\r\n    \r\n            if (data.bshadow)\r\n              data.bshadow.hide();\r\n    \r\n            folding.transform('');\r\n    \r\n          break;\r\n        }\r\n    \r\n          data.visible = false;\r\n    \r\n        return this;\r\n      },\r\n    \r\n      hideFoldedPage: function(animate) {\r\n    \r\n        var data = this.data().f;\r\n    \r\n        if (!data.point) return;\r\n    \r\n        var that = this,\r\n          p1 = data.point,\r\n          hide = function() {\r\n            data.point = null;\r\n            data.status = '';\r\n            that.flip('hide');\r\n            that.trigger('end', [data.opts, false]);\r\n          };\r\n    \r\n        if (animate) {\r\n    \r\n          var p4 = flipMethods._c.call(this, p1.corner),\r\n            top = (p1.corner.substr(0,1)=='t'),\r\n            delta = (top) ? Math.min(0, p1.y-p4.y)/2 : Math.max(0, p1.y-p4.y)/2,\r\n            p2 = point2D(p1.x, p1.y+delta),\r\n            p3 = point2D(p4.x, p4.y-delta);\r\n        \r\n          this.animatef({\r\n            from: 0,\r\n            to: 1,\r\n            frame: function(v) {\r\n              var np = bezier(p1, p2, p3, p4, v);\r\n              p1.x = np.x;\r\n              p1.y = np.y;\r\n              flipMethods._fold.call(that, p1);\r\n            },\r\n            complete: hide,\r\n            duration: 800,\r\n            hiding: true\r\n          });\r\n    \r\n        } else {\r\n    \r\n          this.animatef(false);\r\n          hide();\r\n    \r\n        }\r\n      },\r\n    \r\n      turnPage: function(corner) {\r\n    \r\n        var that = this,\r\n          data = this.data().f,\r\n          turnData = data.opts.turn.data();\r\n    \r\n        corner = {corner: (data.corner) ?\r\n          data.corner.corner :\r\n          corner || flipMethods._cAllowed.call(this)[0]};\r\n    \r\n        var p1 = data.point ||\r\n          flipMethods._c.call(this,\r\n            corner.corner,\r\n            (data.opts.turn) ? turnData.opts.elevation : 0),\r\n          p4 = flipMethods._c2.call(this, corner.corner);\r\n    \r\n          this.trigger('flip').\r\n            animatef({\r\n              from: 0,\r\n              to: 1,\r\n              frame: function(v) {\r\n    \r\n                var np = bezier(p1, p1, p4, p4, v);\r\n                corner.x = np.x;\r\n                corner.y = np.y;\r\n                flipMethods._showFoldedPage.call(that, corner);\r\n    \r\n              },\r\n              complete: function() {\r\n                \r\n                that.trigger('end', [data.opts, true]);\r\n    \r\n              },\r\n              duration: turnData.opts.duration,\r\n              turning: true\r\n            });\r\n    \r\n          data.corner = null;\r\n      },\r\n    \r\n      moving: function() {\r\n    \r\n        return 'effect' in this.data();\r\n      \r\n      },\r\n    \r\n      isTurning: function() {\r\n    \r\n        return this.flip('moving') && this.data().effect.turning;\r\n      \r\n      },\r\n    \r\n      corner: function() {\r\n        \r\n        return this.data().f.corner;\r\n          \r\n      },\r\n    \r\n      _eventStart: function(e) {\r\n    \r\n        var data = this.data().f,\r\n          turn = data.opts.turn;\r\n    \r\n        if (!data.corner && !data.disabled && !this.flip('isTurning') &&\r\n          data.opts.page==turn.data().pagePlace[data.opts.page])\r\n        {\r\n    \r\n          data.corner = flipMethods._isIArea.call(this, e);\r\n    \r\n          if (data.corner && flipMethods._foldingPage.call(this)) {\r\n    \r\n            this.trigger('pressed', [data.point]);\r\n            flipMethods._showFoldedPage.call(this, data.corner);\r\n    \r\n            return false;\r\n    \r\n          } else\r\n            data.corner = null;\r\n    \r\n        }\r\n    \r\n      },\r\n    \r\n      _eventMove: function(e) {\r\n    \r\n        var data = this.data().f;\r\n    \r\n        if (!data.disabled) {\r\n    \r\n          e = (isTouch) ? e.originalEvent.touches : [e];\r\n    \r\n          if (data.corner) {\r\n    \r\n            var pos = data.parent.offset();\r\n            data.corner.x = e[0].pageX-pos.left;\r\n            data.corner.y = e[0].pageY-pos.top;\r\n            flipMethods._showFoldedPage.call(this, data.corner);\r\n    \r\n          } else if (data.hover && !this.data().effect && this.is(':visible')) {\r\n    \r\n            var point = flipMethods._isIArea.call(this, e[0]);\r\n    \r\n            if (point) {\r\n    \r\n              if ((data.effect=='sheet' && point.corner.length==2)  || data.effect=='hard') {\r\n                data.status = 'hover';\r\n                var origin = flipMethods._c.call(this, point.corner, data.opts.cornerSize/2);\r\n                point.x = origin.x;\r\n                point.y = origin.y;\r\n                flipMethods._showFoldedPage.call(this, point, true);\r\n              }\r\n            \r\n            } else {\r\n              \r\n              if (data.status=='hover') {\r\n                data.status = '';\r\n                flipMethods.hideFoldedPage.call(this, true);\r\n              }\r\n    \r\n            }\r\n    \r\n          }\r\n    \r\n        }\r\n    \r\n      },\r\n    \r\n      _eventEnd: function() {\r\n    \r\n        var data = this.data().f,\r\n          corner = data.corner;\r\n    \r\n        if (!data.disabled && corner) {\r\n          if (trigger('released', this, [data.point || corner])!='prevented') {\r\n            flipMethods.hideFoldedPage.call(this, true);\r\n          }\r\n        }\r\n    \r\n        data.corner = null;\r\n    \r\n      },\r\n    \r\n      disable: function(disable) {\r\n    \r\n        flipMethods.setData.call(this, {'disabled': disable});\r\n        return this;\r\n    \r\n      },\r\n    \r\n      hover: function(hover) {\r\n        \r\n        flipMethods.setData.call(this, {'hover': hover});\r\n        return this;\r\n    \r\n      },\r\n    \r\n      peel: function (corner, animate) {\r\n    \r\n        var data = this.data().f;\r\n    \r\n        if (corner) {\r\n    \r\n          if ($.inArray(corner, corners.all)==-1)\r\n            throw turnError('Corner '+corner+' is not permitted');\r\n    \r\n          if ($.inArray(corner, flipMethods._cAllowed.call(this))!=-1) {\r\n    \r\n            var point = flipMethods._c.call(this, corner, data.opts.cornerSize/2);\r\n            \r\n            data.status = 'peel';\r\n    \r\n            flipMethods._showFoldedPage.call(this,\r\n            {\r\n              corner: corner,\r\n              x: point.x,\r\n              y: point.y\r\n            }, animate);\r\n    \r\n          }\r\n    \r\n    \r\n        } else {\r\n    \r\n          data.status = '';\r\n    \r\n          flipMethods.hideFoldedPage.call(this, animate);\r\n          \r\n        }\r\n    \r\n        return this;\r\n      }\r\n    };\r\n    \r\n    \r\n    // Processes classes\r\n    \r\n    function dec(that, methods, args) {\r\n    \r\n      if (!args[0] || typeof(args[0])=='object')\r\n        return methods.init.apply(that, args);\r\n    \r\n      else if (methods[args[0]])\r\n        return methods[args[0]].apply(that, Array.prototype.slice.call(args, 1));\r\n    \r\n      else\r\n        throw turnError(args[0] + ' is not a method or property');\r\n    \r\n    }\r\n    \r\n    \r\n    // Attributes for a layer\r\n    \r\n    function divAtt(top, left, zIndex, overf) {\r\n        \r\n      return {'css': {\r\n        position: 'absolute',\r\n        top: top,\r\n        left: left,\r\n        'overflow': overf || 'hidden',\r\n        zIndex: zIndex || 'auto'\r\n      }\r\n    };\r\n          \r\n    }\r\n    \r\n    // Gets a 2D point from a bezier curve of four points\r\n    \r\n    function bezier(p1, p2, p3, p4, t) {\r\n    \r\n      var a = 1 - t,\r\n        b = a * a * a,\r\n        c = t * t * t;\r\n        \r\n      return point2D(Math.round(b*p1.x + 3*t*a*a*p2.x + 3*t*t*a*p3.x + c*p4.x),\r\n        Math.round(b*p1.y + 3*t*a*a*p2.y + 3*t*t*a*p3.y + c*p4.y));\r\n    \r\n    }\r\n      \r\n    // Converts an angle from degrees to radians\r\n    \r\n    function rad(degrees) {\r\n      \r\n      return degrees/180*PI;\r\n    \r\n    }\r\n    \r\n    // Converts an angle from radians to degrees\r\n    \r\n    function deg(radians) {\r\n      \r\n      return radians/PI*180;\r\n    \r\n    }\r\n    \r\n    // Gets a 2D point\r\n    \r\n    function point2D(x, y) {\r\n      \r\n      return {x: x, y: y};\r\n    \r\n    }\r\n    \r\n    // Webkit 534.3 on Android wrongly repaints elements that use overflow:hidden + rotation\r\n    \r\n    function rotationAvailable() {\r\n      var parts;\r\n    \r\n      if ((parts = /AppleWebkit\\/([0-9\\.]+)/i.exec(navigator.userAgent))) {\r\n        var webkitVersion = parseFloat(parts[1]);\r\n        return (webkitVersion>534.3);\r\n      } else {\r\n        return true;\r\n      }\r\n    }\r\n    \r\n    // Returns the traslate value\r\n    \r\n    function translate(x, y, use3d) {\r\n      \r\n      return (has3d && use3d) ? ' translate3d(' + x + 'px,' + y + 'px, 0px) '\r\n      : ' translate(' + x + 'px, ' + y + 'px) ';\r\n    \r\n    }\r\n    \r\n    // Returns the rotation value\r\n    \r\n    function rotate(degrees) {\r\n      \r\n      return ' rotate(' + degrees + 'deg) ';\r\n    \r\n    }\r\n    \r\n    // Checks if a property belongs to an object\r\n    \r\n    function has(property, object) {\r\n      \r\n      return Object.prototype.hasOwnProperty.call(object, property);\r\n    \r\n    }\r\n    \r\n    // Gets the CSS3 vendor prefix\r\n    \r\n    function getPrefix() {\r\n    \r\n      var vendorPrefixes = ['Moz','Webkit','Khtml','O','ms'],\r\n      len = vendorPrefixes.length,\r\n      vendor = '';\r\n    \r\n      while (len--)\r\n        if ((vendorPrefixes[len] + 'Transform') in document.body.style)\r\n          vendor='-'+vendorPrefixes[len].toLowerCase()+'-';\r\n    \r\n      return vendor;\r\n    \r\n    }\r\n    \r\n    // Detects the transitionEnd Event\r\n    \r\n    function getTransitionEnd() {\r\n    \r\n      var t,\r\n        el = document.createElement('fakeelement'),\r\n        transitions = {\r\n          'transition':'transitionend',\r\n          'OTransition':'oTransitionEnd',\r\n          'MSTransition':'transitionend',\r\n          'MozTransition':'transitionend',\r\n          'WebkitTransition':'webkitTransitionEnd'\r\n        };\r\n    \r\n      for (t in transitions) {\r\n        if (el.style[t] !== undefined) {\r\n          return transitions[t];\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Gradients\r\n    \r\n    function gradient(obj, p0, p1, colors, numColors) {\r\n    \r\n      var j, cols = [];\r\n    \r\n      if (vendor=='-webkit-') {\r\n    \r\n        for (j = 0; j<numColors; j++)\r\n          cols.push('color-stop('+colors[j][0]+', '+colors[j][1]+')');\r\n        \r\n        obj.css({'background-image':\r\n            '-webkit-gradient(linear, '+\r\n            p0.x+'% '+\r\n            p0.y+'%,'+\r\n            p1.x+'% '+\r\n            p1.y+'%, '+\r\n            cols.join(',') + ' )'});\r\n      } else {\r\n        \r\n        p0 = {x:p0.x/100 * obj.width(), y:p0.y/100 * obj.height()};\r\n        p1 = {x:p1.x/100 * obj.width(), y:p1.y/100 * obj.height()};\r\n    \r\n        var dx = p1.x-p0.x,\r\n          dy = p1.y-p0.y,\r\n          angle = Math.atan2(dy, dx),\r\n          angle2 = angle - Math.PI/2,\r\n          diagonal = Math.abs(obj.width()*Math.sin(angle2))+Math.abs(obj.height()*Math.cos(angle2)),\r\n          gradientDiagonal = Math.sqrt(dy*dy + dx*dx),\r\n          corner = point2D((p1.x<p0.x) ? obj.width() : 0, (p1.y<p0.y) ? obj.height() : 0),\r\n          slope = Math.tan(angle),\r\n          inverse = -1/slope,\r\n          x = (inverse*corner.x - corner.y - slope*p0.x + p0.y)/(inverse-slope),\r\n          c = {x: x, y: inverse*x - inverse*corner.x + corner.y},\r\n          segA = (Math.sqrt( Math.pow(c.x-p0.x,2) + Math.pow(c.y-p0.y,2)));\r\n    \r\n          for (j = 0; j<numColors; j++)\r\n            cols.push(' '+colors[j][1]+' '+((segA + gradientDiagonal*colors[j][0])*100/diagonal)+'%');\r\n    \r\n          obj.css({'background-image': vendor+'linear-gradient(' + (-angle) + 'rad,' + cols.join(',') + ')'});\r\n      }\r\n    }\r\n    \r\n    \r\n    // Triggers an event\r\n    \r\n    function trigger(eventName, context, args) {\r\n    \r\n      var event = $.Event(eventName);\r\n      context.trigger(event, args);\r\n      if (event.isDefaultPrevented())\r\n        return 'prevented';\r\n      else if (event.isPropagationStopped())\r\n        return 'stopped';\r\n      else\r\n        return '';\r\n    }\r\n    \r\n    // JS Errors\r\n    \r\n    function turnError(message) {\r\n    \r\n      function TurnJsError(message) {\r\n        this.name = \"TurnJsError\";\r\n        this.message = message;\r\n      }\r\n    \r\n      TurnJsError.prototype = new Error();\r\n      TurnJsError.prototype.constructor = TurnJsError;\r\n      return new TurnJsError(message);\r\n    \r\n    }\r\n    \r\n    // Find the offset of an element ignoring its transformation\r\n    \r\n    function findPos(obj) {\r\n    \r\n      var offset = {top: 0, left: 0};\r\n    \r\n      do{\r\n        offset.left += obj.offsetLeft;\r\n        offset.top += obj.offsetTop;\r\n      } while ((obj = obj.offsetParent));\r\n    \r\n      return offset;\r\n    \r\n    }\r\n    \r\n    // Checks if there's hard page compatibility\r\n    // IE9 is the only browser that does not support hard pages\r\n    \r\n    function hasHardPage() {\r\n      return (navigator.userAgent.indexOf('MSIE 9.0')==-1);\r\n    }\r\n    \r\n    // Request an animation\r\n    \r\n    window.requestAnim = (function() {\r\n      return window.requestAnimationFrame ||\r\n        window.webkitRequestAnimationFrame ||\r\n        window.mozRequestAnimationFrame ||\r\n        window.oRequestAnimationFrame ||\r\n        window.msRequestAnimationFrame ||\r\n        function(callback) {\r\n          window.setTimeout(callback, 1000 / 60);\r\n        };\r\n    \r\n    })();\r\n    \r\n    // Extend $.fn\r\n    \r\n    $.extend($.fn, {\r\n    \r\n      flip: function() {\r\n        return dec($(this[0]), flipMethods, arguments);\r\n      },\r\n    \r\n      turn: function() {\r\n        return dec($(this[0]), turnMethods, arguments);\r\n      },\r\n    \r\n      transform: function(transform, origin) {\r\n    \r\n        var properties = {};\r\n        \r\n        if (origin)\r\n          properties[vendor+'transform-origin'] = origin;\r\n        \r\n        properties[vendor+'transform'] = transform;\r\n      \r\n        return this.css(properties);\r\n    \r\n      },\r\n    \r\n      animatef: function(point) {\r\n    \r\n        var data = this.data();\r\n    \r\n        if (data.effect)\r\n          data.effect.stop();\r\n    \r\n        if (point) {\r\n    \r\n          if (!point.to.length) point.to = [point.to];\r\n          if (!point.from.length) point.from = [point.from];\r\n    \r\n          var diff = [],\r\n            len = point.to.length,\r\n            animating = true,\r\n            that = this,\r\n            time = (new Date()).getTime(),\r\n            frame = function() {\r\n    \r\n              if (!data.effect || !animating)\r\n                return;\r\n    \r\n              var v = [],\r\n                timeDiff = Math.min(point.duration, (new Date()).getTime() - time);\r\n    \r\n              for (var i = 0; i < len; i++)\r\n                v.push(data.effect.easing(1, timeDiff, point.from[i], diff[i], point.duration));\r\n    \r\n              point.frame((len==1) ? v[0] : v);\r\n    \r\n              if (timeDiff==point.duration) {\r\n                delete data['effect'];\r\n                that.data(data);\r\n                if (point.complete)\r\n                  point.complete();\r\n              } else {\r\n                window.requestAnim(frame);\r\n              }\r\n            };\r\n    \r\n          for (var i = 0; i < len; i++)\r\n            diff.push(point.to[i] - point.from[i]);\r\n    \r\n          data.effect = $.extend({\r\n            stop: function() {\r\n              animating = false;\r\n            },\r\n            easing: function (x, t, b, c, data) {\r\n              return c * Math.sqrt(1 - (t=t/data-1)*t) + b;\r\n            }\r\n          }, point);\r\n    \r\n          this.data(data);\r\n    \r\n          frame();\r\n    \r\n        } else {\r\n          \r\n          delete data['effect'];\r\n    \r\n        }\r\n      }\r\n    });\r\n    \r\n    // Export some globals\r\n    \r\n    $.isTouch = isTouch;\r\n    $.mouseEvents = mouseEvents;\r\n    $.cssPrefix = getPrefix;\r\n    $.cssTransitionEnd = getTransitionEnd;\r\n    $.findPos = findPos;\r\n    \r\n    })(jQuery);\n\n\n// WEBPACK FOOTER //\n// ./src/util/turn.js","<template>\r\n    <div class=\"diary-container\">\r\n        <div id=\"diary_turn_container\">\r\n             <div class=\"diary-turn-item\" v-for=\"(item, index) in 10\" :key=\"index\">\r\n                <div class=\"diary-left\">\r\n                    <div class=\"diary-info\">\r\n                        <div class=\"title\">日期{{index}}</div>\r\n                        <div class=\"desc\">2023年3月1日</div>\r\n                    </div>\r\n                    <div class=\"diary-info\">\r\n                        <div class=\"title\">天气</div>\r\n                        <div class=\"desc\">晴朗</div>\r\n                    </div>\r\n                    <div class=\"diary-info\">\r\n                        <div class=\"title\">大区</div>\r\n                        <div class=\"desc\">黑色玫瑰</div>\r\n                    </div>\r\n                    <div class=\"diary-info\">\r\n                        <div class=\"title\">ID</div>\r\n                        <div class=\"desc\">faker</div>\r\n                    </div>\r\n                    <div class=\"diary-info\">\r\n                        <div class=\"title\">段位</div>\r\n                        <div class=\"desc\">黄金</div>\r\n                    </div>\r\n                    <div class=\"diary-info\">\r\n                        <div class=\"title\">胜场/场次</div>\r\n                        <div class=\"desc\">5/10</div>\r\n                    </div>\r\n                    <div class=\"diary-info\">\r\n                        <div class=\"title\">上分</div>\r\n                        <div class=\"desc\">-50</div>\r\n                    </div>\r\n                    \r\n                </div>\r\n                <div class=\"diary-rigth\">\r\n\r\n                    <p class=\"p\">对面的打野一直抓我，气死了，直接拉黑名单对面的打野一直抓我，气死了，\r\n                        直接拉黑名单对面的打野一直抓我，气死了，直接拉黑名单对面的打野一直抓我，气死了，\r\n                        直接拉黑名单对面的打野一直抓我，气死了，直接拉黑名单对面的打野一直抓我，气死了，\r\n                        直接拉黑名单对面的打野一直抓我，气死了，直接拉黑名单对面的打野一直抓我，气死了，\r\n                        直接拉黑名单对面的打野一直抓我，气死了，直接拉黑名单对面的打野一直抓我，气死了，\r\n                        直接拉黑名单对面的打野一直抓我，气死了，直接拉黑名单</p>\r\n\r\n                    <img class=\"diary-img\" src='https://img0.baidu.com/it/u=913981874,2619394631&fm=253&fmt=auto?w=1422&h=800' />\r\n                    \r\n                    <!-- <p class=\"p rate\">队友评价</p> -->\r\n                    <p class=\"p red\">红榜</p>  \r\n                    <p class=\"p red-list\">theshy、UZI</p>\r\n                    <p class=\"p red-list\">theshy、UZI</p>\r\n                    <p class=\"p red-list\">theshy、UZI</p>\r\n                    <p class=\"p black\">黑榜</p>  \r\n                    <p class=\"p black-list\">\r\n                        bang、rookie、吴彦祖\r\n                    </p> \r\n                </div>  \r\n\r\n            </div>\r\n        </div>\r\n       \r\n        \r\n    </div>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\n    import $ from 'jquery';\r\n    import turn from \"@/util/turn.js\";\r\n    export default {\r\n        name: '',\r\n        components: {},\r\n        data(){\r\n            return {}\r\n        },\r\n        created() {\r\n\r\n        },\r\n        mounted() {\r\n            this.onTurn();\r\n        },\r\n        methods: {\r\n            onTurn() {\r\n            var _that = this;\r\n            this.$nextTick(() => {\r\n                //自适应宽高\r\n                var w = $(\".diary-container\").width();\r\n                var h = $(\".diary-container\").height();\r\n                $(\"#diary_turn_container\").turn({\r\n                acceleration: true, //启用硬件加速,移动端有效\r\n                display: \"single\", //显示：single=单页，double=双页，默认双页\r\n                duration: 500, // 翻页撒开鼠标，页面的延迟\r\n                page: 1, // 默认显示第几页\r\n                pages: 2,\r\n                gradients: true, // 折叠处的光泽渐变，主要体现翻页的立体感、真实感\r\n                autoCenter: true, //\r\n                turnCorners: \"bl,br\", // 设置可翻页的页角(都试过了，乱写 4个角都能出发卷起)， bl,br   tl,tr   bl,tr\r\n                width: w,\r\n                height: h,\r\n                when: {\r\n                    turned: function (e, page, view) {\r\n                        console.log(e, page, view);\r\n                        // if (page == 2) {\r\n                            // _that.$router.push({ path: \"/zchb/contents\", query: { id: 1 } });\r\n                        // }\r\n                    },\r\n                },\r\n                });\r\n            });\r\n            }\r\n        },\r\n       \r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n    @import 'diary';\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/diary/diary.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"diary-container\"},[_c('div',{attrs:{\"id\":\"diary_turn_container\"}},_vm._l((10),function(item,index){return _c('div',{key:index,staticClass:\"diary-turn-item\"},[_c('div',{staticClass:\"diary-left\"},[_c('div',{staticClass:\"diary-info\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"日期\"+_vm._s(index))]),_vm._v(\" \"),_c('div',{staticClass:\"desc\"},[_vm._v(\"2023年3月1日\")])]),_vm._v(\" \"),_vm._m(0,true),_vm._v(\" \"),_vm._m(1,true),_vm._v(\" \"),_vm._m(2,true),_vm._v(\" \"),_vm._m(3,true),_vm._v(\" \"),_vm._m(4,true),_vm._v(\" \"),_vm._m(5,true)]),_vm._v(\" \"),_vm._m(6,true)])}),0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"diary-info\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"天气\")]),_vm._v(\" \"),_c('div',{staticClass:\"desc\"},[_vm._v(\"晴朗\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"diary-info\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"大区\")]),_vm._v(\" \"),_c('div',{staticClass:\"desc\"},[_vm._v(\"黑色玫瑰\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"diary-info\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"ID\")]),_vm._v(\" \"),_c('div',{staticClass:\"desc\"},[_vm._v(\"faker\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"diary-info\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"段位\")]),_vm._v(\" \"),_c('div',{staticClass:\"desc\"},[_vm._v(\"黄金\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"diary-info\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"胜场/场次\")]),_vm._v(\" \"),_c('div',{staticClass:\"desc\"},[_vm._v(\"5/10\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"diary-info\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"上分\")]),_vm._v(\" \"),_c('div',{staticClass:\"desc\"},[_vm._v(\"-50\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"diary-rigth\"},[_c('p',{staticClass:\"p\"},[_vm._v(\"对面的打野一直抓我，气死了，直接拉黑名单对面的打野一直抓我，气死了，\\n                    直接拉黑名单对面的打野一直抓我，气死了，直接拉黑名单对面的打野一直抓我，气死了，\\n                    直接拉黑名单对面的打野一直抓我，气死了，直接拉黑名单对面的打野一直抓我，气死了，\\n                    直接拉黑名单对面的打野一直抓我，气死了，直接拉黑名单对面的打野一直抓我，气死了，\\n                    直接拉黑名单对面的打野一直抓我，气死了，直接拉黑名单对面的打野一直抓我，气死了，\\n                    直接拉黑名单对面的打野一直抓我，气死了，直接拉黑名单\")]),_vm._v(\" \"),_c('img',{staticClass:\"diary-img\",attrs:{\"src\":\"https://img0.baidu.com/it/u=913981874,2619394631&fm=253&fmt=auto?w=1422&h=800\"}}),_vm._v(\" \"),_c('p',{staticClass:\"p red\"},[_vm._v(\"红榜\")]),_vm._v(\" \"),_c('p',{staticClass:\"p red-list\"},[_vm._v(\"theshy、UZI\")]),_vm._v(\" \"),_c('p',{staticClass:\"p red-list\"},[_vm._v(\"theshy、UZI\")]),_vm._v(\" \"),_c('p',{staticClass:\"p red-list\"},[_vm._v(\"theshy、UZI\")]),_vm._v(\" \"),_c('p',{staticClass:\"p black\"},[_vm._v(\"黑榜\")]),_vm._v(\" \"),_c('p',{staticClass:\"p black-list\"},[_vm._v(\"\\n                    bang、rookie、吴彦祖\\n                \")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d8227f38\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/diary/diary.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d8227f38\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./diary.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./diary.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./diary.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d8227f38\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./diary.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-d8227f38\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/diary/diary.vue\n// module id = null\n// module chunks = ","import diary from './diary.vue'\r\n\r\nexport default diary\n\n\n// WEBPACK FOOTER //\n// ./src/pages/diary/index.js"],"sourceRoot":""}